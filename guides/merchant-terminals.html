<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Merchant Terminals - Centrapay Docs</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Merchant Terminals | Centrapay Docs</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Merchant Terminals" /> <meta property="og:locale" content="en_US" /> <meta property="og:site_name" content="Centrapay Docs" /> <script type="application/ld+json"> {"url":"/guides/merchant-terminals","@type":"WebPage","headline":"Merchant Terminals","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Centrapay Docs </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Getting Started</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/guides" class="nav-list-link">Guides</a><ul class="nav-list "><li class="nav-list-item "><a href="/guides/introduction" class="nav-list-link">Guides Introduction</a></li><li class="nav-list-item active"><a href="/guides/merchant-terminals" class="nav-list-link active">Merchant Terminals</a></li><li class="nav-list-item "><a href="/guides/payment-flows" class="nav-list-link">Payment Flows</a></li><li class="nav-list-item "><a href="/guides/creating-test-money" class="nav-list-link">Creating Test Money</a></li><li class="nav-list-item "><a href="/guides/ecommerce" class="nav-list-link">eCommerce</a></li><li class="nav-list-item "><a href="/guides/example-oidc-consumer" class="nav-list-link">Example OIDC Consumer</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api" class="nav-list-link">API Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/api/introduction" class="nav-list-link">API Introduction</a></li><li class="nav-list-item "><a href="/api/auth" class="nav-list-link">Auth</a></li><li class="nav-list-item "><a href="/api/status-codes" class="nav-list-link">Status Codes</a></li><li class="nav-list-item "><a href="/api/data-types" class="nav-list-link">Data Types</a></li><li class="nav-list-item "><a href="/api/api-keys" class="nav-list-link">API Keys</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/accounts" class="nav-list-link">Accounts</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/accounts" class="nav-list-link">Accounts</a> </li><li class="nav-list-item "> <a href="/api/account-memberships" class="nav-list-link">Account Memberships</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/assets" class="nav-list-link">Assets</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/assets" class="nav-list-link">Assets</a> </li><li class="nav-list-item "> <a href="/api/asset-transfers" class="nav-list-link">Asset Transfers</a> </li><li class="nav-list-item "> <a href="/api/asset-types" class="nav-list-link">Asset Types</a> </li><li class="nav-list-item "> <a href="/api/external-assets" class="nav-list-link">External Assets</a> </li><li class="nav-list-item "> <a href="/api/wallets" class="nav-list-link">Wallets</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/bank-accounts" class="nav-list-link">Bank Accounts</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/bank-accounts" class="nav-list-link">Bank Accounts</a> </li><li class="nav-list-item "> <a href="/api/funds-transfers" class="nav-list-link">Funds Transfers</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/merchants" class="nav-list-link">Merchants</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/merchants" class="nav-list-link">Merchants</a> </li><li class="nav-list-item "> <a href="/api/merchant-configs" class="nav-list-link">Merchant Configs</a> </li></ul></li><li class="nav-list-item "><a href="/api/patron-codes" class="nav-list-link">Patron Codes</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/payment-requests" class="nav-list-link">Payment Requests</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/payment-requests" class="nav-list-link">Payment Requests</a> </li><li class="nav-list-item "> <a href="/api/legacy-payment-requests" class="nav-list-link">Legacy</a> </li></ul></li><li class="nav-list-item "><a href="/api/profiles" class="nav-list-link">Profiles</a></li><li class="nav-list-item "><a href="/api/quotas" class="nav-list-link">Quotas</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Centrapay Docs" aria-label="Search Centrapay Docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://centrapay.com" class="site-button" > Centrapay </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/guides">Guides</a></li> <li class="breadcrumb-nav-list-item"><span>Merchant Terminals</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 id="integrating-merchant-terminals"> <a href="#integrating-merchant-terminals" aria-labelledby="integrating-merchant-terminals" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Integrating Merchant Terminals </h1> <p>Integrating a merchant terminal with Centrapay APIs requires creating, cancelling, voiding and refunding <a href="/api/payment-requests">Payment Requests</a> on behalf of Merchants using a “merchant terminal” API key.</p> <h2 class="no_toc text-delta" id="contents"> <a href="#contents" aria-labelledby="contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Contents </h2> <ul id="markdown-toc"> <li><a href="#api-keys" id="markdown-toc-api-keys">API Keys</a></li> <li><a href="#merchant-configs" id="markdown-toc-merchant-configs">Merchant Configs</a></li> <li><a href="#example-flows" id="markdown-toc-example-flows">Example Flows</a></li> <li><a href="#terminal-interface-guidelines" id="markdown-toc-terminal-interface-guidelines">Terminal Interface Guidelines</a> <ul> <li><a href="#displaying-a-button" id="markdown-toc-displaying-a-button">Displaying a Button</a></li> <li><a href="#displaying-an-icon" id="markdown-toc-displaying-an-icon">Displaying an Icon</a></li> <li><a href="#displaying-qr-codes" id="markdown-toc-displaying-qr-codes">Displaying QR Codes</a></li> </ul> </li> <li><a href="#integration-architecture" id="markdown-toc-integration-architecture">Integration Architecture</a></li> <li><a href="#mitigating-network-issues" id="markdown-toc-mitigating-network-issues">Mitigating Network Issues</a></li> <li><a href="#polling-vs-webhooks" id="markdown-toc-polling-vs-webhooks">Polling vs Webhooks</a></li> </ul> <h2 id="api-keys"> <a href="#api-keys" aria-labelledby="api-keys" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> API Keys </h2> <p>To create API keys, you first need to get in touch with Centrapay to be issued an Integrator Account and an “account owner” API key. An “account owner” is a special kind of role that allows you to manage your account.</p> <p>You can use this key to <a href="/api/api-keys#create-api-key">Create an API Key</a> with the “merchant terminal” role. A “merchant terminal” key has a role that can create, cancel, void and refund Payment Requests on behalf of merchants.</p> <div class="cp-warning"><b>Warning:</b> You are responsible for the safety of your API keys </div> <h2 id="merchant-configs"> <a href="#merchant-configs" aria-labelledby="merchant-configs" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Merchant Configs </h2> <p>Centrapay <a href="/api/merchant-configs">Merchant Configs</a> represent an available set of configured payment methods that can be utilized by one or more payment terminals by a Merchant.</p> <p>Merchants and merchant configs are managed by Centrapay. The only details you need to be able to create payment requests on their behalf are the <code class="language-plaintext highlighter-rouge">merchantId</code> and <code class="language-plaintext highlighter-rouge">merchantConfigId</code> (aka <code class="language-plaintext highlighter-rouge">clientId</code>). Centrapay will send you these details through whatever channel works for you. Please get in touch to let us know.</p> <p>In the future Centrapay will allow an integrator to on-board their own merchants through APIs using integrator API keys.</p> <h2 id="example-flows"> <a href="#example-flows" aria-labelledby="example-flows" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example Flows </h2> <p>See <a href="/guides/payment-flows">Payment Flows</a> for an overview of the API calls required for different payment flows.</p> <h2 id="terminal-interface-guidelines"> <a href="#terminal-interface-guidelines" aria-labelledby="terminal-interface-guidelines" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Terminal Interface Guidelines </h2> <p>When configuring a terminal with Centrapay there are a few common touch points that require branded assets. Please use the <a href="https://centrapay.com/brand-assets/" class="external">Centrapay Brand Assets</a> when building the UI for these screens.</p> <h3 id="displaying-a-button"> <a href="#displaying-a-button" aria-labelledby="displaying-a-button" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Displaying a Button </h3> <p><img src="/images/terminal-centrapay-button.png" /></p> <p>Touch displays should show a button that loads the QR Code screen when pressed.</p> <h3 id="displaying-an-icon"> <a href="#displaying-an-icon" aria-labelledby="displaying-an-icon" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Displaying an Icon </h3> <p><img src="/images/terminal-centrapay-icon.png" /></p> <p>Displays that don’t support touch should show an icon above the button used to load the QR Code screen.</p> <h3 id="displaying-qr-codes"> <a href="#displaying-qr-codes" aria-labelledby="displaying-qr-codes" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Displaying QR Codes </h3> <p><img src="/images/terminal-centrapay-qrcode.png" /></p> <p>Centrapay QR codes should be displayed with a Centrapay logo in the centre.</p> <h2 id="integration-architecture"> <a href="#integration-architecture" aria-labelledby="integration-architecture" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Integration Architecture </h2> <p>We strongly recommend Centrapay APIs are invoked from your backend and not directly from your payment terminals. Centralizing the invocation of our APIs from your backend offers the following benefits:</p> <ol> <li>Merchant network administrators will not need to make additional firewall changes.</li> <li>Your Centrapay API Keys can be managed centrally inside your secured network.</li> <li>TLS negotiation with Centrapay APIs can be managed independently of terminal hardware and software updates.</li> </ol> <h2 id="mitigating-network-issues"> <a href="#mitigating-network-issues" aria-labelledby="mitigating-network-issues" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Mitigating Network Issues </h2> <p>The following mitigations will be helpful to deal with inconsistencies in Payment Request statuses due to network issues and race conditions:</p> <h4> Respect Payment Request Status </h4> <p>Use the Payment Request status as the source of truth when determining if a Payment Request is paid or expired. For example, if cancelling a Payment Request fails with a <code class="language-plaintext highlighter-rouge">REQUEST_PAID</code> error then terminal should respond accordingly; either show transaction as paid or initiate a void instead.</p> <h4> Timeout Offset </h4> <p>Payment Requests have a configurable timeout which defaults to 2 minutes. Payment integrators should make sure that the payment terminal times out 5-10 seconds <strong>after</strong> the payment request. For example, if the payment terminal has a 90 second payment timeout then the Payment Request could be created with an 85 second timeout to prevent the payment terminal expiring at the same time as the payment request is paid.</p> <h2 id="polling-vs-webhooks"> <a href="#polling-vs-webhooks" aria-labelledby="polling-vs-webhooks" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Polling vs Webhooks </h2> <p>Integrators can optionally take advantage of <a href="/api/legacy-payment-requests#webhooks">Payment Request Webhooks</a> to help improve responsiveness to Payment Request status changes. However, integrators <strong>must not</strong> rely solely on webhooks and <strong>must</strong> fall back to polling the <a href="/api/legacy-payment-requests#requests-info">Get Payment Request</a> endpoint to reliably detect when a Payment Request is paid.</p> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2021 Centrapay</p> </footer> </div> </div> <a href="#" id="search-button" class="search-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-search"></use></svg> </a> <div class="search-overlay"></div> </div> </body> </html>
