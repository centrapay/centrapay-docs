I"½H<h1 class="no_toc" id="managed-integration">Managed Integration</h1>

<p>A Managed Integration is an <a href="/api/integrations">Integration</a>  which a third party can control.</p>

<h2 class="no_toc text-delta" id="contents">Contents</h2>

<ul id="markdown-toc">
  <li><a href="#models" id="markdown-toc-models">Models</a>    <ul>
      <li><a href="#managed-integration-1" id="markdown-toc-managed-integration-1">Managed Integration</a></li>
      <li><a href="#invitation-summary-experimental" id="markdown-toc-invitation-summary-experimental">Invitation Summary <strong>EXPERIMENTAL</strong></a></li>
      <li><a href="#bank-account" id="markdown-toc-bank-account">Bank Account</a></li>
    </ul>
  </li>
  <li><a href="#params" id="markdown-toc-params">Params</a>    <ul>
      <li><a href="#paypal-referral" id="markdown-toc-paypal-referral">paypal-referral</a></li>
    </ul>
  </li>
  <li><a href="#operations" id="markdown-toc-operations">Operations</a>    <ul>
      <li><a href="#create-or-update-a-managed-integration-experimental" id="markdown-toc-create-or-update-a-managed-integration-experimental">Create or Update a Managed Integration <strong>EXPERIMENTAL</strong></a></li>
      <li><a href="#get-a-managed-integration-experimental" id="markdown-toc-get-a-managed-integration-experimental">Get a Managed Integration <strong>EXPERIMENTAL</strong></a></li>
    </ul>
  </li>
</ul>

<h2 id="models">Models</h2>

<h3 id="managed-integration-1">Managed Integration</h3>

<h4>Mandatory Fields </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">id</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">The Managed Integrationâ€™s unique identifier.</td>
    </tr>
    <tr>
      <td style="text-align: left">type</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">The type of Managed Integration. Supported types are <code class="language-plaintext highlighter-rouge">paypal-referral</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left">enabled</td>
      <td style="text-align: left">Boolean</td>
      <td style="text-align: left">Flag indicating whether the Managed Integration should become active or inactive.</td>
    </tr>
    <tr>
      <td style="text-align: left">status</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">Current status of the Managed Integration. Supported values are <code class="language-plaintext highlighter-rouge">created</code>, <code class="language-plaintext highlighter-rouge">pending</code>, <code class="language-plaintext highlighter-rouge">provisioning</code>, <code class="language-plaintext highlighter-rouge">active</code>, <code class="language-plaintext highlighter-rouge">inactive</code> and <code class="language-plaintext highlighter-rouge">archived</code>.</td>
    </tr>
    <tr>
      <td style="text-align: left">externalId</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">Field used to reference an id from an external system.</td>
    </tr>
    <tr>
      <td style="text-align: left">params</td>
      <td style="text-align: left">Object</td>
      <td style="text-align: left"><a href="#params">Params</a> depending on the Managed Integration type.</td>
    </tr>
    <tr>
      <td style="text-align: left">createdAt</td>
      <td style="text-align: left"><a href="/api/data-types#timestamp ">Timestamp </a></td>
      <td style="text-align: left">When the Managed Integration was created.</td>
    </tr>
    <tr>
      <td style="text-align: left">createdBy</td>
      <td style="text-align: left"><a href="/api/data-types#crn ">CRN </a></td>
      <td style="text-align: left">The User or API Key that created the Managed Integration.</td>
    </tr>
    <tr>
      <td style="text-align: left">updatedAt</td>
      <td style="text-align: left"><a href="/api/data-types#timestamp ">Timestamp </a></td>
      <td style="text-align: left">When the Managed Integration was updated.</td>
    </tr>
    <tr>
      <td style="text-align: left">updatedBy</td>
      <td style="text-align: left"><a href="/api/data-types#crn ">CRN </a></td>
      <td style="text-align: left">The User or API Key that updated the Managed Integration.</td>
    </tr>
  </tbody>
</table>

<h4>Optional Fields </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">claimedByAccountId</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">Centrapay account id used to claim the Managed Integration.</td>
    </tr>
    <tr>
      <td style="text-align: left">claimedBy</td>
      <td style="text-align: left"><a href="/api/data-types#crn ">CRN </a></td>
      <td style="text-align: left">The User or API Key that claimed the Managed Integration.</td>
    </tr>
    <tr>
      <td style="text-align: left">claimedAt</td>
      <td style="text-align: left"><a href="/api/data-types#timestamp ">Timestamp </a></td>
      <td style="text-align: left">When the Managed Integration was claimed.</td>
    </tr>
    <tr>
      <td style="text-align: left">invitation</td>
      <td style="text-align: left"><a href="#invitation-summary">Invitation Summary</a></td>
      <td style="text-align: left">A summary of the associated <a href="/api/invitations.html">Invitation</a>.</td>
    </tr>
    <tr>
      <td style="text-align: left">inProgress</td>
      <td style="text-align: left">Boolean</td>
      <td style="text-align: left">Flag indicating whether a status transition is in progress.</td>
    </tr>
    <tr>
      <td style="text-align: left">test</td>
      <td style="text-align: left">Boolean</td>
      <td style="text-align: left">A flag which is present if the Managed Integration is for testing</td>
    </tr>
  </tbody>
</table>

<p><a name="invitation-summary"></a></p>
<h3 id="invitation-summary-experimental">Invitation Summary <strong>EXPERIMENTAL</strong></h3>

<p>A summary of the <a href="/api/invitations.html">Invitation</a> for a Managed Integration.</p>

<h4>Fields </h4>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>id</td>
      <td>String</td>
      <td>The Invitationâ€™s unique identifier.</td>
    </tr>
    <tr>
      <td>code</td>
      <td>String</td>
      <td>The Invitation code.</td>
    </tr>
    <tr>
      <td>expiresAt</td>
      <td><a href="/api/data-types#timestamp ">Timestamp </a></td>
      <td>When the Invitation expires.</td>
    </tr>
  </tbody>
</table>

<h3 id="bank-account">Bank Account</h3>
<h4>Mandatory Fields </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">number</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">The bank account number</td>
    </tr>
  </tbody>
</table>

<h2 id="params">Params</h2>

<h3 id="paypal-referral">paypal-referral</h3>

<h4>Mandatory Fields </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">centrapayMerchantId</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">The ID of the Centrapay merchant that will be onboarded.</td>
    </tr>
    <tr>
      <td style="text-align: left">email</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">The email address to send the PayPal referral to.</td>
    </tr>
  </tbody>
</table>

<h2 id="operations">Operations</h2>

<h3 id="create-or-update-a-managed-integration-experimental">Create or Update a Managed Integration <strong>EXPERIMENTAL</strong></h3>

<p>
        PUT <code>/<wbr />api/<wbr />managed-integrations/<wbr />{type}/<wbr />{externalId}</code>
        
        
        
        <h4></h4>
      
        
        <div class="highlighter-rouge">
          <pre class="highlight"><code>curl <span class="nt">-X</span> PUT https://service.centrapay.com/api/managed-integrations/paypal-referral/DKTs3U38hdhfEqwF1JKoT2 <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "enabled": true,
    "params": {
      "centrapayMerchantId": "5ffcaf432003060007b98343",
      "email": "test@centrapay.com"
    }
  }'</span></code></pre>
        </div>
      
      
      </p>

<h4>Required Fields </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">enabled</td>
      <td style="text-align: left">Boolean</td>
      <td style="text-align: left">Flag indicating whether the Managed Integration should become active or inactive.</td>
    </tr>
    <tr>
      <td style="text-align: left">params</td>
      <td style="text-align: left">Object</td>
      <td style="text-align: left"><a href="#params">Params</a> depending on the Managed Integration type.</td>
    </tr>
  </tbody>
</table>

<h4>Optional Fields </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">test</td>
      <td style="text-align: left">Boolean</td>
      <td style="text-align: left">Flag indicating the Managed Integration is for testing, this cannot be changed once the resource has been created.</td>
    </tr>
  </tbody>
</table>

<h4>Example response payload </h4>

<p>
        <div class="highlighter-rouge">
          <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paypal-referral"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"externalId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DKTs3U38hdhfEqwF1JKoT2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"centrapayMerchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ffcaf432003060007b98343"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@centrapay.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"provisioning"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"claimedByAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaim1Cu1Q55uooxSens6yk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"claimedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"claimedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"inProgress"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:BIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
</span><span class="p">}</span></code></pre>
        </div>
      </p>

<h4>Error Responses </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Status</th>
      <th style="text-align: left">Code</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">400</td>
      <td style="text-align: left">INVALID_<wbr />PARAMS</td>
      <td style="text-align: left">Invalid <a href="#params">Params</a> provided for Managed Integration type.</td>
    </tr>
    <tr>
      <td style="text-align: left">403</td>
      <td style="text-align: left">MERCHANT_<wbr />LIVENESS_<wbr />MISMATCH</td>
      <td style="text-align: left">The <code class="language-plaintext highlighter-rouge">test</code> flag on the merchant doesnâ€™t match the <code class="language-plaintext highlighter-rouge">test</code> flag on the <code class="language-plaintext highlighter-rouge">paypal-referral</code> managed integration.</td>
    </tr>
    <tr>
      <td style="text-align: left">403</td>
      <td style="text-align: left">MERCHANT_<wbr />NOT_<wbr />FOUND</td>
      <td style="text-align: left">The merchant is not found with the <code class="language-plaintext highlighter-rouge">centrapayMerchantId</code> on the <code class="language-plaintext highlighter-rouge">paypal-referral</code> managed integration.</td>
    </tr>
  </tbody>
</table>

<h3 id="get-a-managed-integration-experimental">Get a Managed Integration <strong>EXPERIMENTAL</strong></h3>

<p>
        GET <code>/<wbr />api/<wbr />managed-integrations/<wbr />{id}</code>
        
        
        <h4></h4>
      
        
        <div class="highlighter-rouge">
          <pre class="highlight"><code>curl https://service.centrapay.com/api/managed-integrations/dh375hdh08f590260d9a07f <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span></code></pre>
        </div>
      
      
        
      </p>

<h4>Example response payload </h4>

<p>
        <div class="highlighter-rouge">
          <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paypal-referral"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"externalId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"DKTs3U38hdhfEqwF1JKoT2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"params"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"centrapayMerchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ffcaf432003060007b98343"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test@centrapay.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"provisioning"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"claimedByAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaim1Cu1Q55uooxSens6yk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"claimedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"claimedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"inProgress"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-11T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:BIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2020-06-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
</span><span class="p">}</span></code></pre>
        </div>
      </p>

:ET