I"A∏<h1 class="no_toc" id="merchants">Merchants</h1>

<p>A merchant is an initiator of <a href="/api/payment-requests">Payment Requests</a>. A Merchant has <a href="/api/merchant-configs">Merchant Configs</a>
which define the payment methods available for a Payment Request.</p>

<h2 class="no_toc text-delta" id="contents">Contents</h2>

<ul id="markdown-toc">
  <li><a href="#models" id="markdown-toc-models">Models</a>    <ul>
      <li><a href="#merchant" id="markdown-toc-merchant">Merchant</a></li>
      <li><a href="#settlement-config" id="markdown-toc-settlement-config">Settlement Config</a></li>
      <li><a href="#merchant-search-result" id="markdown-toc-merchant-search-result">Merchant Search Result</a></li>
      <li><a href="#accepted-asset" id="markdown-toc-accepted-asset">Accepted Asset</a></li>
      <li><a href="#product" id="markdown-toc-product">Product</a></li>
    </ul>
  </li>
  <li><a href="#operations" id="markdown-toc-operations">Operations</a>    <ul>
      <li><a href="#create-a-merchant" id="markdown-toc-create-a-merchant">Create a Merchant</a></li>
      <li><a href="#get-a-merchant" id="markdown-toc-get-a-merchant">Get a Merchant</a></li>
      <li><a href="#list-merchants-for-account" id="markdown-toc-list-merchants-for-account">List Merchants for Account</a></li>
      <li><a href="#update-a-merchant" id="markdown-toc-update-a-merchant">Update a Merchant</a></li>
      <li><a href="#set-merchant-onboarding-status" id="markdown-toc-set-merchant-onboarding-status">Set Merchant Onboarding Status</a></li>
      <li><a href="#search-merchants-experimental" id="markdown-toc-search-merchants-experimental">Search Merchants <strong>EXPERIMENTAL</strong></a></li>
      <li><a href="#list-all-merchants-deprecated" id="markdown-toc-list-all-merchants-deprecated">List all Merchants <strong>DEPRECATED</strong></a></li>
    </ul>
  </li>
</ul>

<h2 id="models">Models</h2>

<h3 id="merchant">Merchant</h3>

<h4>Mandatory Fields </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">id</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">Merchant‚Äôs unique identifier.</td>
    </tr>
    <tr>
      <td style="text-align: left">accountId</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">Id of Merchant‚Äôs owning Centrapay account.</td>
    </tr>
    <tr>
      <td style="text-align: left">name</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">Merchant name.</td>
    </tr>
    <tr>
      <td style="text-align: left">country</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">Merchant <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2" class="external">ISO 3166</a> country code. Must match the ‚Äúregion‚Äù on the <a href="/api/accounts">Account</a>.</td>
    </tr>
    <tr>
      <td style="text-align: left">createdAt</td>
      <td style="text-align: left"><a href="/api/data-types#timestamp ">Timestamp </a></td>
      <td style="text-align: left">When the Merchant was created.</td>
    </tr>
    <tr>
      <td style="text-align: left">createdBy</td>
      <td style="text-align: left"><a href="/api/data-types#crn ">CRN </a></td>
      <td style="text-align: left">The User or API Key that created the Merchant.</td>
    </tr>
    <tr>
      <td style="text-align: left">updatedAt</td>
      <td style="text-align: left"><a href="/api/data-types#timestamp ">Timestamp </a></td>
      <td style="text-align: left">When the Merchant was updated.</td>
    </tr>
    <tr>
      <td style="text-align: left">updatedBy</td>
      <td style="text-align: left"><a href="/api/data-types#crn ">CRN </a></td>
      <td style="text-align: left">The User or API Key that updated the Merchant.</td>
    </tr>
    <tr>
      <td style="text-align: left">onboardingStatus</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">The onboarding status of the Merchant. See <a href="#onboarding-statuses">Onboarding Statuses</a> for possible values.</td>
    </tr>
  </tbody>
</table>

<h4>Optional Fields </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">test</td>
      <td style="text-align: left">Boolean</td>
      <td style="text-align: left"><strong>EXPERIMENTAL</strong> Flag indicating merchant is for testing.</td>
    </tr>
    <tr>
      <td style="text-align: left">settlementConfig</td>
      <td style="text-align: left"><a href="#settlement-config">Settlement Config</a></td>
      <td style="text-align: left"><strong>EXPERIMENTAL</strong> Merchant settlement config.</td>
    </tr>
    <tr>
      <td style="text-align: left">location</td>
      <td style="text-align: left"><a href="/api/data-types#location ">Location </a></td>
      <td style="text-align: left"><strong>EXPERIMENTAL</strong> Physical Location of Merchant. It is highly recommended that you provide this otherwise, users won‚Äôt be able to find you with our <a href="#search-merchants-experimental">Merchant Search</a> API if they perform a origin + distance query.</td>
    </tr>
    <tr>
      <td style="text-align: left">onboardingStatusReason</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">The reason associated with the <a href="#onboarding-statuses">Onboarding Status</a>. See <a href="#onboarding-status-reasons">Onboarding Status Reasons</a> for possible values.</td>
    </tr>
  </tbody>
</table>

<p><a name="onboarding-statuses"></a></p>
<h4>Onboarding Statuses </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Status</th>
      <th style="text-align: left">Description</th>
      <th style="text-align: left">Allowed Reasons</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">applied</td>
      <td style="text-align: left">Identifies merchants that have registered to be activated for the Centrapay service.</td>
      <td style="text-align: left">¬†</td>
    </tr>
    <tr>
      <td style="text-align: left">provisioning</td>
      <td style="text-align: left">Identifies merchants that are in the process of being activated for the Centrapay service.</td>
      <td style="text-align: left">¬†</td>
    </tr>
    <tr>
      <td style="text-align: left">active</td>
      <td style="text-align: left">Identifies merchants that have been activated for Centrapay services successfully (i.e. they have successfully created a Payment Request).</td>
      <td style="text-align: left">¬†</td>
    </tr>
    <tr>
      <td style="text-align: left">deactivated</td>
      <td style="text-align: left">Identifies merchants that have been de-registered for the Centrapay service.</td>
      <td style="text-align: left">duplicate, data-quality-issues, no-response, change-of-ownership, centrapay-discontinued.</td>
    </tr>
    <tr>
      <td style="text-align: left">on-hold</td>
      <td style="text-align: left">Identifies merchants that have been placed on hold.</td>
      <td style="text-align: left">seasonal-business-closure, incompatible-terminal, no-response</td>
    </tr>
  </tbody>
</table>

<p><a name="onboarding-status-reasons"></a></p>
<h4>Onboarding Status Reasons </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Reason</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">duplicate</td>
      <td style="text-align: left">The merchant already exists in the Centrapay system.</td>
    </tr>
    <tr>
      <td style="text-align: left">data-quality-issues</td>
      <td style="text-align: left">Data quality issues are preventing the merchant from onboarding.</td>
    </tr>
    <tr>
      <td style="text-align: left">no-response</td>
      <td style="text-align: left">No response has been received from the merchant.</td>
    </tr>
    <tr>
      <td style="text-align: left">change-of-ownership</td>
      <td style="text-align: left">The merchant has changed ownership.</td>
    </tr>
    <tr>
      <td style="text-align: left">centrapay-discontinued</td>
      <td style="text-align: left">The merchant is no longer using Centrapay.</td>
    </tr>
    <tr>
      <td style="text-align: left">seasonal-business-closure</td>
      <td style="text-align: left">The merchant has closed temporarily.</td>
    </tr>
    <tr>
      <td style="text-align: left">incompatible-terminal</td>
      <td style="text-align: left">The merchant does not have any compatible terminals.</td>
    </tr>
  </tbody>
</table>

<h3 id="settlement-config">Settlement Config</h3>
<h4>Optional Fields </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">bankAccountId</td>
      <td style="text-align: left">String</td>
      <td style="text-align: left">The id of the bank account funds should be settled into. This must belong to the account</td>
    </tr>
  </tbody>
</table>

<h3 id="merchant-search-result">Merchant Search Result</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">id</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a></td>
      <td style="text-align: left">Merchant‚Äôs unique identifier</td>
    </tr>
    <tr>
      <td style="text-align: left">name</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a></td>
      <td style="text-align: left">Merchant‚Äôs name</td>
    </tr>
    <tr>
      <td style="text-align: left">acceptedAssets</td>
      <td style="text-align: left"><a href="#accepted-asset">Accepted Asset</a></td>
      <td style="text-align: left">List of assets accepted by the merchant</td>
    </tr>
    <tr>
      <td style="text-align: left">location</td>
      <td style="text-align: left"><a href="/api/data-types#location ">Location </a> <span class="cp-badge">Optional</span></td>
      <td style="text-align: left">Physical location of the merchant</td>
    </tr>
  </tbody>
</table>

<h3 id="accepted-asset">Accepted Asset</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">assetType</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a></td>
      <td style="text-align: left">The <a href="/api/asset-types">type</a> of the asset</td>
    </tr>
    <tr>
      <td style="text-align: left">products</td>
      <td style="text-align: left"><a href="#product">Product</a> <span class="cp-badge">Optional</span></td>
      <td style="text-align: left">List of products supported by the asset type. Only available for <a href="/api/assets#gift-cards">epay.nzd</a> and <a href="/api/assets#tokens-experimental">centrapay.token</a> asset types.</td>
    </tr>
  </tbody>
</table>

<h3 id="product">Product</h3>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">id</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a></td>
      <td style="text-align: left">Product‚Äôs unique identifier</td>
    </tr>
  </tbody>
</table>

<h2 id="operations">Operations</h2>

<h3 id="create-a-merchant">Create a Merchant</h3>

<p>
        POST <code>/<wbr />api/<wbr />merchants</code>
        
        
        <h4></h4>
      
        
        <div class="highlighter-rouge">
          <pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/merchants <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "accountId": "C4QnjXvj8At6SMsEN4LRi9",
    "name": "Centrapay Cafe Auckland",
    "country": "NZ",
    "test": false
  }'</span></code></pre>
        </div>
      
      
        
      </p>

<h4>Example response payload </h4>

<p>
        <div class="highlighter-rouge">
          <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yqwyya0rzz3vvshqw0474u89xtj5fn"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Cafe Auckland"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZ"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"onboardingStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"applied"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
</span><span class="p">}</span></code></pre>
        </div>
      </p>

<h4>Error Responses </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Status</th>
      <th style="text-align: left">Code</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">403</td>
      <td style="text-align: left">BANK_<wbr />ACCOUNT_<wbr />MISMATCH</td>
      <td style="text-align: left">The bank account in the settlement config does not belong to the same account.</td>
    </tr>
    <tr>
      <td style="text-align: left">403</td>
      <td style="text-align: left">ACCOUNT_<wbr />REGION_<wbr />MISMATCH</td>
      <td style="text-align: left">The merchant‚Äôs ‚Äúcountry‚Äù does not match the ‚Äúregion‚Äù on the Account.</td>
    </tr>
  </tbody>
</table>

<h3 id="get-a-merchant">Get a Merchant</h3>

<p>
        GET <code>/<wbr />api/<wbr />merchants/<wbr />{merchantId}</code>
        
        
        <h4></h4>
      
        
        <div class="highlighter-rouge">
          <pre class="highlight"><code>curl https://service.centrapay.com/api/merchants/5ee0c486308f590260d9a07f <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span></code></pre>
        </div>
      
      
        
      </p>

<h4>Example response payload </h4>

<p>
        <div class="highlighter-rouge">
          <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yqwyya0rzz3vvshqw0474u89xtj5fn"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Parisian - Brown"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AD"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"onboardingStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"applied"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
</span><span class="p">}</span></code></pre>
        </div>
      </p>

<h3 id="list-merchants-for-account">List Merchants for Account</h3>

<p>Returns a <a href="/api/pagination">paginated</a> list of Merchants attached to an Account.</p>

<p>
        GET <code>/<wbr />api/<wbr />accounts/<wbr />{accountId}/<wbr />merchants</code>
        
        
        <h4></h4>
      
        
        <div class="highlighter-rouge">
          <pre class="highlight"><code>curl https://service.centrapay.com/api/accounts/Jaim1Cu1Q55uooxSens6yk/merchants <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span></code></pre>
        </div>
      
      
        
      </p>

<h4>Example response payload </h4>

<p>
        <div class="highlighter-rouge">
          <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaim1Cu1Q55uooxSens6yk"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f6bf6ff81552101f8ff6122"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Adams, Runolfsdottir and Botsford"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"onboardingStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"applied"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaim1Cu1Q55uooxSens6yk"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GM"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f6bf6ff81552101f8ff6123"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vandervort Inc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"onboardingStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"applied"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
        </div>
      </p>

<h3 id="update-a-merchant">Update a Merchant</h3>

<p>
        PUT <code>/<wbr />api/<wbr />merchants/<wbr />{merchantId}</code>
        
        
        <h4></h4>
      
        
        <div class="highlighter-rouge">
          <pre class="highlight"><code>curl <span class="nt">-X</span> PUT https://service.centrapay.com/api/merchants/5ee0c486308f590260d9a07f <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "name": "Centrapay Caf√©",
    "location": {
      "lat": "-36.8483579",
      "lng": "174.7725834",
      "city": "Auckland",
      "postCode": "1010",
      "country": "NZ"
    },
    "settlementConfig": {
      "bankAccountId": "WRhAxxWpTKb5U7pXyxQjjY"
    }
  }'</span></code></pre>
        </div>
      
      
        
      </p>

<h4>Example response payload </h4>

<p>
        <div class="highlighter-rouge">
          <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yqwyya0rzz3vvshqw0474u89xtj5fn"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Caf√©"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZ"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"onboardingStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"applied"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"lat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-36.8483579"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"lng"</span><span class="p">:</span><span class="w"> </span><span class="s2">"174.7725834"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Auckland"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"postCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1010"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZ"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"settlementConfig"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"bankAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"WRhAxxWpTKb5U7pXyxQjjY"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-09-12T01:11:22.491Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
</span><span class="p">}</span></code></pre>
        </div>
      </p>

<h4>Error Responses </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Status</th>
      <th style="text-align: left">Code</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">403</td>
      <td style="text-align: left">BANK_<wbr />ACCOUNT_<wbr />MISMATCH</td>
      <td style="text-align: left">The bank account in the settlement config does not belong to the same account.</td>
    </tr>
  </tbody>
</table>

<h3 id="set-merchant-onboarding-status">Set Merchant Onboarding Status</h3>

<p>
        POST <code>/<wbr />api/<wbr />merchants/<wbr />{merchantId}/<wbr />set-onboarding-status</code>
        
        
        <h4></h4>
      
        
        <div class="highlighter-rouge">
          <pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/merchants/5ee0c486308f590260d9a07f/set-onboarding-status <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "onboardingStatus": "deactivated",
    "onboardingStatusReason": "change-of-ownership"
  }'</span></code></pre>
        </div>
      
      
        
      </p>

<h4>Example response payload </h4>

<p>
        <div class="highlighter-rouge">
          <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"set-onboarding-status"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"onboardingStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deactivated"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"onboardingStatusReason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"change-of-ownership"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-09-12T01:11:22.491Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
</span><span class="p">}</span></code></pre>
        </div>
      </p>

<h3 id="search-merchants-experimental">Search Merchants <strong>EXPERIMENTAL</strong></h3>

<p>Returns a <a href="/api/pagination">paginated</a> response of <a href="#merchant-search-result">merchant search results</a> that match the search query</p>

<p>This endpoint does not require <a href="/api/auth">Auth</a></p>

<p>
        GET <code>/<wbr />api/<wbr />merchants/<wbr />search</code>
        
        
        <h4></h4>
      
        
        <div class="highlighter-rouge">
          <pre class="highlight"><code>curl <span class="nt">-G</span> https://service.centrapay.com/api/merchants/search <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="nv">origin</span><span class="o">=</span>123.42,32.22 <span class="se">\</span>
  <span class="nt">-d</span> <span class="nv">distance</span><span class="o">=</span>100 <span class="se">\</span>
  <span class="nt">-d</span> <span class="nv">asset</span><span class="o">=</span>epay.nzd.main,37873 <span class="se">\</span>
  <span class="nt">-d</span> <span class="nv">pageKey</span><span class="o">=</span>10 <span class="se">\</span>
  <span class="nt">-d</span> <span class="nv">paginationLimit</span><span class="o">=</span>10</code></pre>
        </div>
      
      
        
      </p>

<h4>Query Parameters </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Parameter</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">origin</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a> <span class="cp-badge">Optional</span></td>
      <td style="text-align: left">The point to be searched around, formatted as a latitude,longitude</td>
    </tr>
    <tr>
      <td style="text-align: left">distance</td>
      <td style="text-align: left"><a href="/api/data-types#number ">Number </a> <span class="cp-badge">Optional</span></td>
      <td style="text-align: left">The distance from the origin to be searched around in km</td>
    </tr>
    <tr>
      <td style="text-align: left">asset</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a> <span class="cp-badge">Optional</span></td>
      <td style="text-align: left">A string of the format <code class="language-plaintext highlighter-rouge">{assetType},{productId}</code> describing the asset where <br /><br /> <code class="language-plaintext highlighter-rouge">assetType</code> is the type of <a href="/api/asset-types">asset</a> to filter the merchants by and <br /> <code class="language-plaintext highlighter-rouge">productId</code> is the asset‚Äôs productCode for <a href="/api/assets#gift-cards">epay.nzd</a> asset types or the asset‚Äôs collectionId for <a href="/api/assets#tokens-experimental">centrapay.token</a> asset types</td>
    </tr>
    <tr>
      <td style="text-align: left">name</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a> <span class="cp-badge">Optional</span></td>
      <td style="text-align: left">Name of the merchant</td>
    </tr>
    <tr>
      <td style="text-align: left">pageKey</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a> <span class="cp-badge">Optional</span></td>
      <td style="text-align: left">pageKey of next merchant to fetch</td>
    </tr>
    <tr>
      <td style="text-align: left">paginationLimit</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a> <span class="cp-badge">Optional</span></td>
      <td style="text-align: left">Maximum amount of merchants to return</td>
    </tr>
  </tbody>
</table>

<h4>Response </h4>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Field</th>
      <th style="text-align: left">Type</th>
      <th style="text-align: left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">totalItems</td>
      <td style="text-align: left"><a href="/api/data-types#number ">Number </a></td>
      <td style="text-align: left">Total number of merchants that match the search query</td>
    </tr>
    <tr>
      <td style="text-align: left">items</td>
      <td style="text-align: left"><a href="#merchant-search-result">Merchant Search Result</a></td>
      <td style="text-align: left">List of merchants returned that match the search query</td>
    </tr>
    <tr>
      <td style="text-align: left">nextPageKey</td>
      <td style="text-align: left"><a href="/api/data-types#string ">String </a></td>
      <td style="text-align: left">Can be used to fetch the next page, not present on the last page</td>
    </tr>
  </tbody>
</table>

<h4>Example response payload </h4>

<p>
        <div class="highlighter-rouge">
          <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"totalItems"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M001"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Store 1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"acceptedAssets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"epay.nzd.main"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"37873"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"38183"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.token.main"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"products"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Xv990BzkgfoDS7bBls50pd"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nl">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"lat"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123.45"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"lng"</span><span class="p">:</span><span class="w"> </span><span class="s2">"32.21"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Auckland"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZ"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"postCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1234"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Auckland"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2 Street Street"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"suburb"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Place"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"nextPageKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20"</span><span class="w">
</span><span class="p">}</span></code></pre>
        </div>
      </p>

<h3 id="list-all-merchants-deprecated">List all Merchants <strong>DEPRECATED</strong></h3>

<p>Returns a <a href="/api/pagination">paginated</a> list of Merchants which belong to the authenticated subject.</p>

<p>
        GET <code>/<wbr />api/<wbr />merchants</code>
        
        
        <h4></h4>
      
        
        <div class="highlighter-rouge">
          <pre class="highlight"><code>curl https://service.centrapay.com/api/merchants <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span></code></pre>
        </div>
      
      
        
      </p>

<h4>Example response payload </h4>

<p>
        <div class="highlighter-rouge">
          <pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3xsjxxwmnpkunjbcpekyekc84rzxr4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"BT"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f6bf6ff81552101f8ff6122"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Adams, Runolfsdottir and Botsford"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"onboardingStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"applied"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3xsjxxwmnpkunjbcpekyekc84rzxr4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GM"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f6bf6ff81552101f8ff6123"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Vandervort Inc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="nl">"onboardingStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"applied"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"accountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3xsjxxwmnpkunjbcpekyekc84rzxr4"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MZ"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5f6bf6ff81552101f8ff6124"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"West, O'Reilly and Huels"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"test"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="nl">"onboardingStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"applied"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-11-12T01:17:46.499Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"updatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn:WIj211vFs9cNACwBb04vQw:api-key:MyApiKey"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre>
        </div>
      </p>

:ET