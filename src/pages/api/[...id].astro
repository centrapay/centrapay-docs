---
import { getCollection } from '../../utils/getCollection';
import ApiReference from '../../layouts/ApiReference.astro';
import LegacyApiReference from '../../layouts/LegacyApiReference.astro';

export async function getStaticPaths() {
  const api = [
    ...await getCollection('api'),
    ...await getCollection('legacyApi'),
  ];

  return api.map(entry => ({
    params: { id: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const Component = entry.filePath.endsWith('.yaml') ? ApiReference : LegacyApiReference;
---
<Component entry={entry} />
