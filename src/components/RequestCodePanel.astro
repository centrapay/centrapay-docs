---
const { title = 'Request', filename, optionalFields } = Astro.props;
import { Code } from 'astro:components';
import CodePanel from './CodePanel.astro';
import createEndpoint from '../utils/createEndpoint.js';

const file = await import(`../content/api/_endpoints/${filename}.js`);
const endpoint = createEndpoint({ endpoint: file.default, optionalFields });
const theme = 'material-theme-darker';
---

<CodePanel title={title} method={endpoint.method} path={endpoint.path}>
  <Code code={endpoint.requests.curl.code} lang={endpoint.requests.curl.lang} theme={theme}/>
</CodePanel>
