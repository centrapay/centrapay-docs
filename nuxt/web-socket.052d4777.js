import{b as l}from"./query.9c6769bf.js";import{r as p}from"./asyncData.e78b50a7.js";import"./runtime-core.esm-bundler.d75e6202.js";import"./entry.9cc28913.js";import"./MessagesBubbleDouble.bc0fc409.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./DisclosureArrowRight.82f469f5.js";import"./CentrapayLogo.d4d1f914.js";import"./NavigationMenu.30d3303e.js";import"./CloseOutline.ed8f665b.js";const t={log:(...r)=>console.log("[Content]",...r),warn:(...r)=>console.warn("[Content]",...r)};let e;function h(){if(!window.WebSocket){t.warn("Could not enable hot reload, your browser does not support WebSocket.");return}const r=o=>{try{if(!JSON.parse(o.data))return;p()}catch{}},s=()=>t.log("WS connected!"),a=o=>{switch(o.code){case"ECONNREFUSED":n(!0);break;default:t.warn("WS Error:",o);break}},i=o=>{o.code===1e3||o.code===1005?t.log("WS closed!"):n(!0)},n=(o=!1)=>{if(o){t.log("WS reconnecting.."),setTimeout(n,1e3);return}if(e){try{e.close()}catch{}e=void 0}const c=`${l().public.content.wsUrl}ws`;t.log(`WS connect to ${c}`),e=new WebSocket(c),e.onopen=s,e.onmessage=r,e.onerror=a,e.onclose=i};return n(),{connect:n}}export{h as useContentWebSocket};
