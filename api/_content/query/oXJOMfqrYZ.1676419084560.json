{"_path":"/guides/example-oidc-consumer","_dir":"guides","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Example OIDC Consumer","description":"How to integrate a browser-based application with the Centrapay OAuth server using an OIDC flow.oidc-client-js) JavaScript library.","nav":{"path":"Reference/App Integrations","order":1},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"This guide demonstrates how to integrate a browser based application with the Centrapay OAuth server using the "},{"type":"element","tag":"a","props":{"href":"https://github.com/IdentityModel/oidc-client-js","rel":["nofollow"]},"children":[{"type":"text","value":"oidc-client-js"}]},{"type":"text","value":" JavaScript library."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"A good starting point for learning more about OIDC is Okta’s "},{"type":"element","tag":"a","props":{"href":"https://developer.okta.com/blog/2019/10/21/illustrated-guide-to-oauth-and-oidc","rel":["nofollow"]},"children":[{"type":"text","value":"OAuth OIDC Illustrated Guide"}]},{"type":"text","value":"."}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"oidc-user-manager-configuration"},"children":[{"type":"text","value":"OIDC User Manager Configuration"}]},{"type":"element","tag":"code","props":{"code":"import Oidc from 'oidc-client';\n\nOidc.Log.logger = console;\n\nconst yourCentrapayOauthClientId = '7mapl0nqonkgl5vfeb3cf86miu';\nconst yourAppOidcRedirectUri = window.location.origin + '/oidc-callback';\nconst userPhoneNumber = '+6421234567890';\nconst userManager = new Oidc.UserManager({\n  /*\n   * Required configs\n   */\n  authority: 'https://auth.centrapay.com/',\n  response_type: 'code',\n  scope: 'openid',\n  client_id: yourCentrapayOauthClientId,\n  redirect_uri: yourAppOidcLoginRedirectUri,\n  loadUserInfo: false, // \"/oauth2/userInfo\" call unsupported by Centrapay OAuth server\n  post_logout_redirect_uri: yourAppOidcLogoutRedirectUri,\n  revokeAccessTokenOnSignout: true,\n  metadata: {\n    end_session_endpoint: 'https://auth.centrapay.com/logout'\n  }\n  /*\n   * Recommended configs\n   */\n  userStore: new Oidc.WebStorageStateStore({ store: window.localStorage }),\n  automaticSilentRenew: true,\n  monitorSession: false, // Suppress session event double firing\n  extraQueryParams: { u: userPhoneNumber }, // Populate Centrapay login form\n});\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"import"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" Oidc "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"from"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'oidc-client'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"Oidc.Log.logger "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" console;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"yourCentrapayOauthClientId"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'7mapl0nqonkgl5vfeb3cf86miu'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"yourAppOidcRedirectUri"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" window.location.origin "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'/oidc-callback'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"userPhoneNumber"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'+6421234567890'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"userManager"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" Oidc."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"UserManager"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"/*"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"   * Required configs"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"   */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  authority: "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'https://auth.centrapay.com/'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  response_type: "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'code'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  scope: "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'openid'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  client_id: yourCentrapayOauthClientId,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  redirect_uri: yourAppOidcLoginRedirectUri,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  loadUserInfo: "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"// \"/oauth2/userInfo\" call unsupported by Centrapay OAuth server"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  post_logout_redirect_uri: yourAppOidcLogoutRedirectUri,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  revokeAccessTokenOnSignout: "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  metadata: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    end_session_endpoint: "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'https://auth.centrapay.com/logout'"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"/*"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"   * Recommended configs"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"   */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  userStore: "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" Oidc."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"WebStorageStateStore"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"({ store: window.localStorage }),"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  automaticSilentRenew: "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"true"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  monitorSession: "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"false"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"// Suppress session event double firing"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  extraQueryParams: { u: userPhoneNumber }, "}]},{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"// Populate Centrapay login form"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"});"}]}]}]}]}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"minimal-oidc-client-usage"},"children":[{"type":"text","value":"Minimal OIDC Client Usage"}]},{"type":"element","tag":"code","props":{"code":"async function login() {\n  userManager.stopSilentRenew();\n  userManager.clearStaleState();\n  /* State attribute is stored and retrievable with OIDC callback state param */\n  await userManager.signinRedirect({ state: window.location.href });\n}\n\nasync function handleOidcCallback() {\n  const result = await userManager.signinRedirectCallback().catch((err) => {\n    console.log('Something went wrong handling OIDC callback');\n  });\n  /* Restore previous location stored against state param */\n  window.location.replace(result.state || '/');\n}\n\nasync function init() {\n  let user = null;\n  if (window.location.pathname == '/oidc-callback') {\n    await handleOidcCallback();\n  } else {\n    user = await userManager.getUser();\n  }\n  if (!user) {\n    await login();\n  }\n  return user;\n}\n\ninit().then(console.log);\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"login"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"stopSilentRenew"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"clearStaleState"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"/* State attribute is stored and retrievable with OIDC callback state param */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"signinRedirect"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"({ state: window.location.href });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"handleOidcCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"signinRedirectCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-dc8a0d"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    console."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'Something went wrong handling OIDC callback'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"/* Restore previous location stored against state param */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  window.location."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"(result.state "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'/'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" user "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"null"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" (window.location.pathname "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"=="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'/oidc-callback'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"handleOidcCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    user "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"getUser"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"!"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"user) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"login"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" user;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"init"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"(console.log);"}]}]}]}]}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"trigger-token-refresh"},"children":[{"type":"text","value":"Trigger Token Refresh"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Manually trigger a token refresh when expired due to user being offline."}]},{"type":"element","tag":"code","props":{"code":"async function refreshUser() {\n  const user await userManager.getUser();\n  if (user.expired) {\n    await userManager.signinSilent();\n    await userManager.signinSilentCallback();\n    console.log('User refreshed');\n  } else {\n    console.log('User not refreshed');\n  }\n  return await userManager.getUser();\n}\n\nrefreshUser()\n  .then(console.log)\n  .catch(err => {\n    console.log({ msg: 'Something went wrong refreshing user token, login required', err });\n  });\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"refreshUser"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" await userManager.getUser();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" (user.expired) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"signinSilent"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"signinSilentCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    console."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'User refreshed'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"else"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    console."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'User not refreshed'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"getUser"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"refreshUser"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"(console.log)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-dc8a0d"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    console."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"({ msg: "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'Something went wrong refreshing user token, login required'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":", err });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  });"}]}]}]}]}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"detect-oidc-user-refresh"},"children":[{"type":"text","value":"Detect OIDC User Refresh"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Detect when OIDC user is refreshed via auto silent renew. The new user "},{"type":"element","tag":"em","props":{},"children":[{"type":"text","value":"may"}]},{"type":"text","value":" have changed with updated claims, for example, if they have added an email address."}]},{"type":"element","tag":"code","props":{"code":"userManager.events.addUserLoaded((user) => {\n  console.log({ msg: 'user auto renew completed', user });\n});\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"userManager.events."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"addUserLoaded"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-dc8a0d"},"children":[{"type":"text","value":"user"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  console."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"({ msg: "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'user auto renew completed'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":", user });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"});"}]}]}]}]}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"oidc-client-logout"},"children":[{"type":"text","value":"OIDC Client Logout"}]},{"type":"element","tag":"code","props":{"code":"async function logout() {\n  /* State attribute is stored and retrievable with OIDC callback state param */\n  await userManager.signoutRedirect({ state: window.location.href });\n}\n\nasync function handleLogoutOidcCallback() {\n  const result = await userManager.signoutRedirectCallback().catch((err) => {\n    console.log('Something went wrong handling OIDC callback');\n  });\n  /* Restore previous location stored against state param */\n  window.location.replace(result.state || '/');\n}\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"logout"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"/* State attribute is stored and retrievable with OIDC callback state param */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"signoutRedirect"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"({ state: window.location.href });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"handleLogoutOidcCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-7f3013"},"children":[{"type":"text","value":"result"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" userManager."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"signoutRedirectCallback"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"()."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"(("}]},{"type":"element","tag":"span","props":{"class":"ct-dc8a0d"},"children":[{"type":"text","value":"err"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":") "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"    console."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'Something went wrong handling OIDC callback'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-2dc868"},"children":[{"type":"text","value":"/* Restore previous location stored against state param */"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"  window.location."}]},{"type":"element","tag":"span","props":{"class":"ct-107dfa"},"children":[{"type":"text","value":"replace"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"(result.state "}]},{"type":"element","tag":"span","props":{"class":"ct-ee0941"},"children":[{"type":"text","value":"||"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-62b20e"},"children":[{"type":"text","value":"'/'"}]},{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-d6fb2c"},"children":[{"type":"text","value":"}"}]}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-dc8a0d{color:#953800}\n.ct-2dc868{color:#6E7781}\n.ct-107dfa{color:#8250DF}\n.ct-7f3013{color:#0550AE}\n.ct-62b20e{color:#0A3069}\n.ct-d6fb2c{color:#24292F}\n.ct-ee0941{color:#CF222E}"}]}],"toc":{"title":"","searchDepth":4,"depth":4,"links":[{"id":"oidc-user-manager-configuration","depth":2,"text":"OIDC User Manager Configuration"},{"id":"minimal-oidc-client-usage","depth":2,"text":"Minimal OIDC Client Usage"},{"id":"trigger-token-refresh","depth":2,"text":"Trigger Token Refresh"},{"id":"detect-oidc-user-refresh","depth":2,"text":"Detect OIDC User Refresh"},{"id":"oidc-client-logout","depth":2,"text":"OIDC Client Logout"}]}},"_type":"markdown","_id":"content:guides:example-oidc-consumer.md","_source":"content","_file":"guides/example-oidc-consumer.md","_extension":"md"}