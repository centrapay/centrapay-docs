{"_path":"/guides/loading-and-sending-assets","_dir":"guides","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Loading and Sending Assets","description":"Issue and distribute Centrapay Assets such as Giftcards or Tokens to users via SMS.","nav":{"path":"Reference/Digital Assets","order":2},"body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/assets","rel":["nofollow"]},"children":[{"type":"text","value":"Assets"}]},{"type":"text","value":" such as Giftcards or Tokens can be issued by a Centrapay Account and then distributed to another Centrapay user’s phone number via SMS."}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"loading-giftcards"},"children":[{"type":"text","value":"Loading Giftcards"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can load Giftcards by calling our "},{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/external-assets","rel":["nofollow"]},"children":[{"type":"text","value":"External Assets"}]},{"type":"text","value":" endpoint. You will need to use the giftcard number for the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"externalId"}]},{"type":"text","value":" field. The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"pin"}]},{"type":"text","value":", the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"issuer"}]},{"type":"text","value":" and the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"type"}]},{"type":"text","value":" need to be on hand too."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"If your asset type is not included on the list, contact "},{"type":"element","tag":"a","props":{"href":"mailto:integrations@centrapay.com"},"children":[{"type":"text","value":"integrations@centrapay.com"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"sending-assets"},"children":[{"type":"text","value":"Sending Assets"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"You can send Assets such as Tokens and Giftcards by calling our "},{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/asset-transfers#asset-transfer-create","rel":["nofollow"]},"children":[{"type":"text","value":"Asset Transfers"}]},{"type":"text","value":" endpoint. You will need to have the recipient’s phone number for "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"recipientAlias"}]},{"type":"text","value":" to identify the reciever."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Optionally the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"senderAlias"}]},{"type":"text","value":" field can be used if you’re loading an asset on behalf of someone else. If the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"recipientAlias"}]},{"type":"text","value":" doesn’t end up creating a Centrapay account, then it will be sent to this number."}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"example-bulk-distribution-of-giftcards"},"children":[{"type":"text","value":"Example: Bulk distribution of Giftcards"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Sometimes you might want to load and distribute Giftcards to a large number of recipients. This requires some scripting, but this is not hard. We can do this with:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A CSV to manage Giftcards to load"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A script to load and send Giftcards"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here’s an example of the CSV named "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"input.csv"}]},{"type":"text","value":":"}]},{"type":"element","tag":"code","props":{"code":"recipientAlias,cardNumber,pin,message\n+64221231234,23403321042,1111,Hello Bob! Here's your giftcard\n+64221231235,23403321042,1111,Hello Alice! Here's your giftcard\n+64221231236,23403321042,1111,Hello Eve! Here's your giftcard\n","language":"bash","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"recipientAlias,cardNumber,pin,message"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"+64221231234,23403321042,1111,Hello"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"Bob!"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"Here's your giftcard"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"+64221231235,23403321042,1111,Hello Alice! Here's"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"your"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"giftcard"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"+64221231236,23403321042,1111,Hello"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"Eve!"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"Here's your giftcard"}]}]}]}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Phone numbers must start with +64"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Here’s an example of the script to parse the CSV and send Giftcards. To run this, you will need:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Node JS in your environment"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"A copy of "},{"type":"element","tag":"a","props":{"href":"https://www.npmjs.com/package/axios","rel":["nofollow"]},"children":[{"type":"text","value":"Axios"}]},{"type":"text","value":" for HTTP requests"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"An "},{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/api-keys","rel":["nofollow"]},"children":[{"type":"text","value":"API Key"}]},{"type":"text","value":" to call our APIs"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Your "},{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/accounts","rel":["nofollow"]},"children":[{"type":"text","value":"Account id"}]},{"type":"text","value":" for the initial load of each Giftcard"}]}]},{"type":"element","tag":"code","props":{"code":"#!/usr/bin/env node\n\nconst apiKey = 'api123'; // FIXME\nconst accountId = 'acc123'; // FIXME\nconst inputFile = './input.csv';\nconst type = 'epay.nzd.main';\nconst category = 'giftcard';\nconst issuer = 'ezipay';\nconst baseUrl = 'https://service.centrapay.com';\n\nconst axios = require('axios');\nconst fs = require('fs');\nconst sleep = require('util').promisify(setTimeout);\n\n// calls axios and return parsed body, sleep and retry if we get 429\nasync function requestWithRetry(args) {\n  let response;\n  try {\n    response = await axios.request(args);\n  } catch(err) {\n    if (err.response.status != 429) {\n      throw(err);\n    }\n    const retrySeconds = Number(err.response.headers['retry-after']) + 1;\n    await sleep(retrySeconds * 1000);\n    response = await axios.request(args);\n  }\n  return response.data;\n}\n\n// loads and sends giftcard to a phone number\nasync function sendGiftcard({ recipientAlias, cardNumber, pin, message }) {\n  const asset = await requestWithRetry({\n    method: 'POST',\n    url: `${baseUrl}/api/external-assets`,\n    data: { accountId, pin, category, issuer, type, externalId: cardNumber },\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Api-Key': apiKey,\n    },\n  });\n  const assetTransfer = await requestWithRetry({\n    method: 'POST',\n    url: `${baseUrl}/api/asset-transfers`,\n    data: { recipientAlias, message, assetId: asset.id },\n    headers: {\n      'Content-Type': 'application/json',\n      'X-Api-Key': apiKey,\n    },\n  });\n  return `Sent ${cardNumber} to ${recipientAlias} with assetTransferId ${assetTransfer.id}`;\n}\n\n// takes a CSV and returns a list of objects where headings are the keys\nfunction parseCsv(input) {\n  const lines = String(input).split('\\n').filter(line => line.length);\n  const [headings, ...rows] = lines.map(row => row.split(',').map(cell => cell.trim()));\n  const objectList = rows.map(values => {\n    const outRow = {};\n    for (const [i, heading] of Object.entries(headings)) {\n      outRow[heading] = values[i]\n    }\n    return outRow;\n  });\n  return objectList;\n}\n\n// loads from input.csv and sends giftcards to people\nasync function run() {\n  const start = new Date();\n  const data = await fs.promises.readFile(inputFile);\n  const csv = parseCsv(data);\n  for (const row of csv) {\n    const msg = await sendGiftcard(row);\n    console.log(msg);\n  }\n  const duration = new Date() - start;\n  return `Done in ${duration / 1000} seconds`;\n}\n\n// entry into the script\nrun()\n  .then(console.log)\n  .catch(console.error);\n","language":"javascript","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-717215"},"children":[{"type":"text","value":"#!/usr/bin/env node"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"apiKey"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'api123'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-717215"},"children":[{"type":"text","value":"// FIXME"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"accountId"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'acc123'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"; "}]},{"type":"element","tag":"span","props":{"class":"ct-717215"},"children":[{"type":"text","value":"// FIXME"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"inputFile"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'./input.csv'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"type"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'epay.nzd.main'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"category"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'giftcard'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"issuer"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'ezipay'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"baseUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'https://service.centrapay.com'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"axios"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'axios'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"fs"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'fs'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"sleep"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"require"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'util'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"promisify"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(setTimeout);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-717215"},"children":[{"type":"text","value":"// calls axios and return parsed body, sleep and retry if we get 429"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"requestWithRetry"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"args"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"let"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" response;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"try"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    response "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" axios."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(args);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  } "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(err) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"if"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" (err.response.status "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"!="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"429"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"throw"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(err);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"retrySeconds"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"Number"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(err.response.headers["}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'retry-after'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"]) "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"+"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"1"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"sleep"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(retrySeconds "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"*"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    response "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" axios."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"request"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(args);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" response.data;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-717215"},"children":[{"type":"text","value":"// loads and sends giftcard to a phone number"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"sendGiftcard"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"({ "}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"recipientAlias"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"cardNumber"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"pin"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"message"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" }) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"asset"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"requestWithRetry"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    method: "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'POST'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    url: "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"`${"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"baseUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"}/api/external-assets`"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    data: { accountId, pin, category, issuer, type, externalId: cardNumber },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    headers: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'Content-Type'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'application/json'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'X-Api-Key'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":": apiKey,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"assetTransfer"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"requestWithRetry"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"({"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    method: "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'POST'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    url: "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"`${"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"baseUrl"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"}/api/asset-transfers`"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    data: { recipientAlias, message, assetId: asset.id },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    headers: {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'Content-Type'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":": "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'application/json'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":","}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"      "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'X-Api-Key'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":": apiKey,"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    },"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"`Sent ${"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"cardNumber"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"} to ${"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"recipientAlias"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"} with assetTransferId ${"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"assetTransfer"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"."}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"id"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"}`"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-717215"},"children":[{"type":"text","value":"// takes a CSV and returns a list of objects where headings are the keys"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"parseCsv"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"input"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":") {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"lines"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"String"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(input)."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"\\n"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"'"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"filter"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"line"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" line."}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"length"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":");"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"headings"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"..."}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"rows"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" lines."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"row"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" row."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"split"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"','"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":")."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"cell"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" cell."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"trim"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"()));"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"objectList"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" rows."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"map"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"("}]},{"type":"element","tag":"span","props":{"class":"ct-f23a33"},"children":[{"type":"text","value":"values"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"=>"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"outRow"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" {};"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" ["}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"i"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":", "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"heading"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"] "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" Object."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"entries"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(headings)) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"      outRow[heading] "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" values[i]"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" outRow;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  });"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" objectList;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-717215"},"children":[{"type":"text","value":"// loads from input.csv and sends giftcards to people"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"async"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"function"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"() {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"start"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"Date"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"();"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"data"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" fs.promises."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"readFile"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(inputFile);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"csv"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"parseCsv"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(data);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"for"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" ("}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"row"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"of"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" csv) {"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"msg"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"await"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"sendGiftcard"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(row);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"    console."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"log"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(msg);"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  }"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"const"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"duration"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"="}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"new"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"Date"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"() "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"-"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" start;"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"return"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"`Done in ${"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"duration"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3ff90f"},"children":[{"type":"text","value":"/"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-c2c41b"},"children":[{"type":"text","value":"1000"}]},{"type":"element","tag":"span","props":{"class":"ct-cbcaae"},"children":[{"type":"text","value":"} seconds`"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":";"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"}"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-717215"},"children":[{"type":"text","value":"// entry into the script"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"run"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"()"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"then"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(console.log)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"  ."}]},{"type":"element","tag":"span","props":{"class":"ct-07ee89"},"children":[{"type":"text","value":"catch"}]},{"type":"element","tag":"span","props":{"class":"ct-26f67d"},"children":[{"type":"text","value":"(console.error);"}]}]}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-07ee89{color:#8250DF}\n.ct-c2c41b{color:#0550AE}\n.ct-3ff90f{color:#CF222E}\n.ct-717215{color:#6E7781}\n.ct-cbcaae{color:#0A3069}\n.ct-26f67d{color:#24292F}\n.ct-f23a33{color:#953800}"}]}],"toc":{"title":"","searchDepth":4,"depth":4,"links":[{"id":"loading-giftcards","depth":2,"text":"Loading Giftcards"},{"id":"sending-assets","depth":2,"text":"Sending Assets"},{"id":"example-bulk-distribution-of-giftcards","depth":2,"text":"Example: Bulk distribution of Giftcards"}]}},"_type":"markdown","_id":"content:guides:loading-and-sending-assets.md","_source":"content","_file":"guides/loading-and-sending-assets.md","_extension":"md"}