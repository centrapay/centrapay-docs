{"_path":"/guides/requesting-pre-auth","_dir":"guides","_draft":false,"_partial":false,"_locale":"en","_empty":false,"title":"Requesting Pre Auth","description":"Centrapay’s Pre Auth extension allows a patron to authorize payment up to a limit when the actual payment amount is not yet known.","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Centrapay’s Pre Auth extension allows a patron to authorize payment up to a limit when the actual payment amount is not yet known."}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"restrictions"},"children":[{"type":"text","value":"Restrictions"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pre Auth payments are not supported in all cases."}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Not all asset types support Pre Auth - Payment options for "},{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/asset-types","rel":["nofollow"]},"children":[{"type":"text","value":"Asset Types"}]},{"type":"text","value":" that do not support Pre Auth will be excluded when a "},{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/payment-requests#payment-request","rel":["nofollow"]},"children":[{"type":"text","value":"Payment Request"}]},{"type":"text","value":" is created with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preAuth"}]},{"type":"text","value":" flag."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Pre Auth is incompatible with Multi-Asset payments - Only one asset type can be authorized for a Pre Auth."}]}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h2","props":{"id":"pre-auth-flow"},"children":[{"type":"text","value":"Pre Auth Flow"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Pre Auth payments go through an orthogonal payment flow compared to Centrapay’s standard payment flow."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"See also: "},{"type":"element","tag":"a","props":{"href":"/guides/requesting-payment"},"children":[{"type":"text","value":"Requesting Payment"}]},{"type":"text","value":"."}]}]},{"type":"element","tag":"code","props":{"code":"sequenceDiagram\n    autonumber\n\n    participant Patron\n    participant POS\n    participant Centrapay\n\n    note over Patron, POS: Connect with Patron\n    POS->>Centrapay: Create Authorization\n\n    note over POS: Poll for Payment Confirmation\n\n    note over POS: ✅ Display Successful Authorization\n\n    note over POS, Centrapay: ⏱️ Some time later..\n\n    loop 0..Many (Up to Authorized Amount)\n        POS->>Centrapay: Make Confirmations Against Authorized Funds\n        note over POS: ✅ Display Successful Confirmation\n    end\n\n    POS->>Centrapay: Release Remaining Authorized Funds\n    note over POS: ✅ Display Successful Release\n","language":"mermaid","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"sequenceDiagram"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"autonumber"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"Patron"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"Centrapay"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    note over Patron, POS: Connect with Patron"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"->>"}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"Centrapay"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Create Authorization"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    note over POS: Poll for Payment Confirmation"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    note over POS: ✅ Display Successful Authorization"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    note over POS, Centrapay: ⏱️ Some time later.."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"loop"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"0..Many (Up to Authorized Amount)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"->>"}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"Centrapay"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Make Confirmations Against Authorized Funds"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"        note over POS: ✅ Display Successful Confirmation"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"end"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"->>"}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"Centrapay"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Release Remaining Authorized Funds"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    note over POS: ✅ Display Successful Release"}]}]}]}]}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The POS places a hold on funds by creating an Authorization."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The POS draws down on authorized funds by making Confirmations against the authorization when the purchase is ready to be fulfilled."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"The POS releases any remaining funds that have not been confirmed back to the Patron."}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"authorize"},"children":[{"type":"text","value":"Authorize"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"An authorization is created when the "},{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/payment-requests#create-a-payment-request","rel":["nofollow"]},"children":[{"type":"text","value":"Payment Request is created"}]},{"type":"text","value":" with the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preAuth"}]},{"type":"text","value":" flag while "},{"type":"element","tag":"a","props":{"href":"/guides/requesting-payment"},"children":[{"type":"text","value":"Requesting Payment"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once the authorization is successful, the Payment Request "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preAuthStatus"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"authorized"}]},{"type":"text","value":"."}]},{"type":"element","tag":"code","props":{"code":"sequenceDiagram\n    autonumber\n\n    participant P as Patron\n    participant POS\n    participant C as Centrapay\n\n    POS->>C: Create Payment Request with preAuth = true\n\n    loop Poll for Payment Confirmation\n        POS->>C: Get Payment Request Status\n\n        opt Payment Request Status is paid\n            Note over POS: Stop Polling\n        end\n    end\n\n    note over POS: ✅ Display Successful Authorization\n","language":"mermaid","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"sequenceDiagram"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"autonumber"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"P"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Patron"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Centrapay"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"->>"}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Create Payment Request with preAuth = true"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"loop"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Poll for Payment Confirmation"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"->>"}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Get Payment Request Status"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"opt"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Payment Request Status is paid"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"            "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"Note"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-920887"},"children":[{"type":"text","value":"over"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Stop Polling"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"end"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"end"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    note over POS: ✅ Display Successful Authorization"}]}]}]}]}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"confirm"},"children":[{"type":"text","value":"Confirm"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Merchants can draw down on authorized funds by making one or more "},{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/payment-requests#make-a-confirmation-against-a-pre-auth-payment-request-experimental","rel":["nofollow"]},"children":[{"type":"text","value":"confirmations"}]},{"type":"text","value":" against an authorized amount. Confirmations must be made with an "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"idempotencyKey"}]},{"type":"text","value":" in order to prevent merchants from drawing down on authorized funds twice."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Confirmations against authorized funds have limits:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Authorizations must be followed up with a confirmation - otherwise, the authorization will expire and the funds will be returned to the asset holder."},{"type":"element","tag":"br","props":{},"children":[]},{"type":"text","value":"The "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preAuthExpiry"}]},{"type":"text","value":" may be adjusted to match pre-determined expiry rules set by the asset provider."}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Multiple confirmations can be performed against an authorization but the total value cannot exceed the original authorized value."}]}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Making confirmations is only allowed against authorizations that have had zero or more confirmations made against them."}]}]},{"type":"element","tag":"code","props":{"code":"sequenceDiagram\n    autonumber\n\n    participant P as Patron\n    participant POS\n    participant C as Centrapay\n\n    POS->>C: Create Authorization\n\n    note over POS, C: ⏱️ Some time later..\n\n    loop 0..Many (Up to Authorized Amount)\n        POS->>C: Make Confirmations Against Authorized Funds\n        Note over POS: ✅ Display Successful Confirmation\n    end\n","language":"mermaid","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"sequenceDiagram"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"autonumber"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"P"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Patron"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Centrapay"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"->>"}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Create Authorization"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    note over POS, C: ⏱️ Some time later.."}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"loop"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"0..Many (Up to Authorized Amount)"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"->>"}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Make Confirmations Against Authorized Funds"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"Note"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-920887"},"children":[{"type":"text","value":"over"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"✅ Display Successful Confirmation"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"end"}]}]}]}]}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"release"},"children":[{"type":"text","value":"Release"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Authorized funds that have not been confirmed can optionally be "},{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/payment-requests#release-funds-held-for-a-pre-auth-payment-request-experimental","rel":["nofollow"]},"children":[{"type":"text","value":"released"}]},{"type":"text","value":" so that the asset holder is granted access to their remaining funds without needing to wait for the authorization to expire."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Once releasing any remaining authorized funds is successful, the Payment Request "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"preAuthStatus"}]},{"type":"text","value":" is set to "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"released"}]},{"type":"text","value":"."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Releasing is only allowed against authorizations that have had zero or more confirmations made against them."}]}]},{"type":"element","tag":"code","props":{"code":"sequenceDiagram\n    autonumber\n\n    participant P as Patron\n    participant POS\n    participant C as Centrapay\n\n    note over POS: All Confirmations Have Been Completed\n        POS->>C: Release Remaining Authorized Funds\n        Note over POS: ✅ Display Successful Confirmation\n","language":"mermaid","meta":null},"children":[{"type":"element","tag":"pre","props":{},"children":[{"type":"element","tag":"code","props":{"__ignoreMap":""},"children":[{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"sequenceDiagram"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"autonumber"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"P"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Patron"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"participant"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"as"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Centrapay"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"    note over POS: All Confirmations Have Been Completed"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"->>"}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"C"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"Release Remaining Authorized Funds"}]}]},{"type":"element","tag":"span","props":{"class":"line"},"children":[{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":"        "}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":"Note"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-920887"},"children":[{"type":"text","value":"over"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-d85260"},"children":[{"type":"text","value":"POS"}]},{"type":"element","tag":"span","props":{"class":"ct-3d3f9b"},"children":[{"type":"text","value":":"}]},{"type":"element","tag":"span","props":{"class":"ct-bff49f"},"children":[{"type":"text","value":" "}]},{"type":"element","tag":"span","props":{"class":"ct-f209c1"},"children":[{"type":"text","value":"✅ Display Successful Confirmation"}]}]}]}]}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"expiry"},"children":[{"type":"text","value":"Expiry"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Authorizations automatically expire after 3 months. Any unreleased funds are subsequently released to the Patron."}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"refund"},"children":[{"type":"text","value":"Refund"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/guides/initiating-refunds"},"children":[{"type":"text","value":"Refunds"}]},{"type":"text","value":" can be made against authorizations, confirmations, released authorizations and expired authorizations."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Refunds made against confirmations must include the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"confirmationIdempotencyKey"}]},{"type":"text","value":" field that is the same as the "},{"type":"element","tag":"code-inline","props":{},"children":[{"type":"text","value":"idempotencyKey"}]},{"type":"text","value":" used for original confirmation."}]}]},{"type":"element","tag":"section","props":{},"children":[{"type":"element","tag":"h3","props":{"id":"void"},"children":[{"type":"text","value":"Void"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://docs.centrapay.com/api/payment-requests#void-a-payment-request-experimental","rel":["nofollow"]},"children":[{"type":"text","value":"Voiding a Payment Request"}]},{"type":"text","value":" will cancel a Payment Request and trigger any refunds necessary. This operation is useful if the POS needs to back out of a transaction due to a network error for example. Voiding can only be used up to 24 hours after the Payment Request was created."}]},{"type":"element","tag":"blockquote","props":{},"children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Voiding is only allowed against Payment Requests awaiting authorization and Payment Requests that have been successfully authorized."}]}]}]}]},{"type":"element","tag":"style","children":[{"type":"text","value":".ct-920887{color:#8250DF}\n.ct-f209c1{color:#0A3069}\n.ct-d85260{color:#953800}\n.ct-bff49f{color:#24292F}\n.ct-3d3f9b{color:#CF222E}"}]}],"toc":{"title":"","searchDepth":4,"depth":4,"links":[{"id":"restrictions","depth":2,"text":"Restrictions"},{"id":"pre-auth-flow","depth":2,"text":"Pre Auth Flow","children":[{"id":"authorize","depth":3,"text":"Authorize"},{"id":"confirm","depth":3,"text":"Confirm"},{"id":"release","depth":3,"text":"Release"},{"id":"expiry","depth":3,"text":"Expiry"},{"id":"refund","depth":3,"text":"Refund"},{"id":"void","depth":3,"text":"Void"}]}]}},"_type":"markdown","_id":"content:guides:requesting-pre-auth.md","_source":"content","_file":"guides/requesting-pre-auth.md","_extension":"md"}