<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Payment Requests - Centrapay Docs</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Payment Requests | Centrapay Docs</title> <meta name="generator" content="Jekyll v4.1.1" /> <meta property="og:title" content="Payment Requests" /> <meta property="og:locale" content="en_US" /> <meta property="og:site_name" content="Centrapay Docs" /> <script type="application/ld+json"> {"url":"/api/payment-requests","@type":"WebPage","headline":"Payment Requests","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Centrapay Docs </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="/" class="nav-list-link">Getting Started</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api" class="nav-list-link">API Reference</a><ul class="nav-list "><li class="nav-list-item "><a href="/api/introduction" class="nav-list-link">API Introduction</a></li><li class="nav-list-item "><a href="/api/auth" class="nav-list-link">Auth</a></li><li class="nav-list-item "><a href="/api/http-status-codes" class="nav-list-link">HTTP Status Codes</a></li><li class="nav-list-item "><a href="/api/data-types" class="nav-list-link">Data Types</a></li><li class="nav-list-item "><a href="/api/pagination" class="nav-list-link">Pagination</a></li><li class="nav-list-item "><a href="/api/api-keys" class="nav-list-link">API Keys</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/accounts" class="nav-list-link">Accounts</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/accounts" class="nav-list-link">Accounts</a> </li><li class="nav-list-item "> <a href="/api/account-memberships" class="nav-list-link">Account Memberships</a> </li><li class="nav-list-item "> <a href="/api/businesses" class="nav-list-link">Businesses</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/assets" class="nav-list-link">Assets</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/assets" class="nav-list-link">Assets</a> </li><li class="nav-list-item "> <a href="/api/asset-transfers" class="nav-list-link">Asset Transfers</a> </li><li class="nav-list-item "> <a href="/api/asset-types" class="nav-list-link">Asset Types</a> </li><li class="nav-list-item "> <a href="/api/external-assets" class="nav-list-link">External Assets</a> </li><li class="nav-list-item "> <a href="/api/tokens" class="nav-list-link">Tokens</a> </li><li class="nav-list-item "> <a href="/api/wallets" class="nav-list-link">Wallets</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/bank-accounts" class="nav-list-link">Bank Accounts</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/bank-accounts" class="nav-list-link">Bank Accounts</a> </li><li class="nav-list-item "> <a href="/api/bank-account-approvals" class="nav-list-link">Bank Account Approvals</a> </li><li class="nav-list-item "> <a href="/api/bank-account-connection-intents" class="nav-list-link">Bank Account Connection Intents</a> </li><li class="nav-list-item "> <a href="/api/funds-transfers" class="nav-list-link">Funds Transfers</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/batches" class="nav-list-link">Batches</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/batches" class="nav-list-link">Batches</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/integrations" class="nav-list-link">Integrations</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/integrations" class="nav-list-link">Integrations</a> </li><li class="nav-list-item "> <a href="/api/integration-requests" class="nav-list-link">Integration Requests</a> </li><li class="nav-list-item "> <a href="/api/managed-integrations" class="nav-list-link">Managed Integrations</a> </li></ul></li><li class="nav-list-item "><a href="/api/invitations.html" class="nav-list-link">Invitations</a></li><li class="nav-list-item "><a href="/api/media-uploads" class="nav-list-link">Media Uploads</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/merchants" class="nav-list-link">Merchants</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/merchants" class="nav-list-link">Merchants</a> </li><li class="nav-list-item "> <a href="/api/merchant-configs" class="nav-list-link">Merchant Configs</a> </li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/payment-requests" class="nav-list-link">Payment Requests</a><ul class="nav-list"><li class="nav-list-item active"> <a href="/api/payment-requests" class="nav-list-link active">Payment Requests</a> </li><li class="nav-list-item "> <a href="/api/legacy-payment-requests" class="nav-list-link">Legacy</a> </li></ul></li><li class="nav-list-item "><a href="/api/profiles" class="nav-list-link">Profiles</a></li><li class="nav-list-item "><a href="/api/quotas" class="nav-list-link">Quotas</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/scanned-codes" class="nav-list-link">Scanned Codes</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/scanned-codes" class="nav-list-link">Scanned Codes</a> </li><li class="nav-list-item "> <a href="/api/patron-codes" class="nav-list-link">Patron Codes</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="/api/section/settlements" class="nav-list-link">Settlements</a><ul class="nav-list"><li class="nav-list-item "> <a href="/api/settlements" class="nav-list-link">Settlements</a> </li></ul></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Centrapay Docs" aria-label="Search Centrapay Docs" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://centrapay.com" class="site-button" > Centrapay </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="/api">API Reference</a></li> <li class="breadcrumb-nav-list-item"><a href="/api/section/payment-requests">Payment Requests</a></li> <li class="breadcrumb-nav-list-item"><span>Payment Requests</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="payment-requests"> <a href="#payment-requests" aria-labelledby="payment-requests" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Payment Requests </h1> <p>Payment Requests represent the intention for a merchant to receive payment for goods and services. Payment Requests define the amount to be paid and the asset types that are acceptable for payment.</p> <p>A Payment Request is shared with, and paid by, a patron. The <a href="https://docs.centrapay.com/guides/payment-flows">Payment Flows Guide</a> has more details regarding negotiation of Payment Requests.</p> <p>Payment Requests have the following statuses:</p> <ul> <li><strong>new</strong>: after being created.</li> <li><strong>paid</strong>: after being paid with one or more transactions.</li> <li><strong>cancelled</strong>: after being cancelled or voided by the merchant.</li> <li><strong>expired</strong>: after expiry time is reached without being paid or cancelled.</li> </ul> <p>Payment requests can also be refunded for a short period of time after being paid.</p> <p>Payment request state transitions can be notified to webhooks.</p> <p>Centrapay Payment Requests are serviced via two sets of endpoints; the “next” version (documented on this page) and the “legacy” version (documented at <a href="/api/legacy-payment-requests">Legacy Payment Requests</a>).</p> <h2 class="no_toc text-delta" id="contents"> <a href="#contents" aria-labelledby="contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Contents </h2> <ul id="markdown-toc"> <li><a href="#models" id="markdown-toc-models">Models</a> <ul> <li><a href="#payment-request" id="markdown-toc-payment-request">Payment Request</a></li> <li><a href="#payment-option" id="markdown-toc-payment-option">Payment Option</a></li> <li><a href="#accepted-collection" id="markdown-toc-accepted-collection">Accepted Collection</a></li> <li><a href="#payment-condition" id="markdown-toc-payment-condition">Payment Condition</a></li> <li><a href="#line-item" id="markdown-toc-line-item">Line Item</a></li> <li><a href="#product-classification" id="markdown-toc-product-classification">Product Classification</a></li> <li><a href="#paid-by" id="markdown-toc-paid-by">Paid By</a></li> <li><a href="#asset-total" id="markdown-toc-asset-total">Asset Total</a></li> <li><a href="#payment-activity" id="markdown-toc-payment-activity">Payment Activity</a></li> </ul> </li> <li><a href="#operations" id="markdown-toc-operations">Operations</a> <ul> <li><a href="#create-a-payment-request" id="markdown-toc-create-a-payment-request">Create a Payment Request</a></li> <li><a href="#get-a-payment-request" id="markdown-toc-get-a-payment-request">Get a Payment Request</a></li> <li><a href="#get-a-payment-request-by-short-code" id="markdown-toc-get-a-payment-request-by-short-code">Get a Payment Request by Short Code</a></li> <li><a href="#get-a-payment-request-linked-to-a-patron-code" id="markdown-toc-get-a-payment-request-linked-to-a-patron-code">Get a Payment Request linked to a Patron Code</a></li> <li><a href="#pay-a-payment-request" id="markdown-toc-pay-a-payment-request">Pay a Payment Request</a></li> <li><a href="#refund-a-payment-request" id="markdown-toc-refund-a-payment-request">Refund a Payment Request</a></li> <li><a href="#void-a-payment-request" id="markdown-toc-void-a-payment-request">Void a Payment Request</a></li> <li><a href="#release-funds-held-for-a-pre-auth-payment-request" id="markdown-toc-release-funds-held-for-a-pre-auth-payment-request">Release funds held for a Pre Auth Payment Request</a></li> <li><a href="#make-a-confirmation-against-a-pre-auth-payment-request" id="markdown-toc-make-a-confirmation-against-a-pre-auth-payment-request">Make a confirmation against a Pre Auth Payment Request</a></li> <li><a href="#list-payment-activities-for-a-merchant" id="markdown-toc-list-payment-activities-for-a-merchant">List Payment Activities for a Merchant</a></li> <li><a href="#list-payment-activities-for-a-payment-request" id="markdown-toc-list-payment-activities-for-a-payment-request">List Payment Activities for a Payment Request</a></li> <li><a href="#accept-payment-condition-for-a-payment-request" id="markdown-toc-accept-payment-condition-for-a-payment-request">Accept Payment Condition for a Payment Request</a></li> <li><a href="#decline-payment-condition-for-a-payment-request" id="markdown-toc-decline-payment-condition-for-a-payment-request">Decline Payment Condition for a Payment Request</a></li> </ul> </li> </ul> <h2 id="models"> <a href="#models" aria-labelledby="models" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Models </h2> <h3 id="payment-request"> <a href="#payment-request" aria-labelledby="payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Payment Request </h3> <h4> Mandatory Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>id</td> <td>String</td> <td>The payment request id.</td> </tr> <tr> <td>shortCode</td> <td>String</td> <td>A shorter id that can be used to identify the payment request for up to two years.</td> </tr> <tr> <td>url</td> <td>String</td> <td>The URL for a Centrapay webpage that allows the user to pay the Payment Request.</td> </tr> <tr> <td>value</td> <td><a href="/api/data-types#monetary ">Monetary </a></td> <td>The canonical value of the payment request. Must be less than 100000000 and positive.</td> </tr> <tr> <td>paymentOptions</td> <td>Array</td> <td>The <a href="#payment-option">Payment Options</a>, indicating valid asset for payment.</td> </tr> <tr> <td>merchantId</td> <td>String</td> <td>The id of the <a href="/api/merchants">Merchant</a> the Payment Request is on behalf of.</td> </tr> <tr> <td>merchantName</td> <td>String</td> <td>The name of the Merchant the Payment Request is on behalf of.</td> </tr> <tr> <td>configId</td> <td>String</td> <td>The <a href="/api/merchant-configs">Merchant Config</a> id used to configure the payment options.</td> </tr> <tr> <td>status</td> <td>String</td> <td>“new”, “paid”, “cancelled”, or “expired”.</td> </tr> <tr> <td>liveness</td> <td>String</td> <td>Indicates liveness of assets that are accepted, determined by the payment options. Values are “main” or “test”.</td> </tr> <tr> <td>createdAt</td> <td><a href="/api/data-types#timestamp ">Timestamp </a></td> <td>When the payment request was created.</td> </tr> <tr> <td>updatedAt</td> <td><a href="/api/data-types#timestamp ">Timestamp </a></td> <td>When the payment request was updated.</td> </tr> <tr> <td>expiresAt</td> <td><a href="/api/data-types#timestamp ">Timestamp </a></td> <td>When the payment request expires.</td> </tr> <tr> <td>merchantConditions</td> <td>Array</td> <td>A dynamic list of <a href="#payment-condition">Payment Conditions</a> that require operator approval to complete a payment. Conditions are calculated when <a href="#get-a-payment-request">polling a Payment Request</a>.</td> </tr> </tbody> </table></div> <h4> Optional Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>patronCodeId</td> <td>String</td> <td>The id of a <a href="/api/patron-codes">Patron Code</a> the payment request is attached to.</td> </tr> <tr> <td>barcode</td> <td>String</td> <td><a href="/api/scanned-codes">Scanned Code</a> used to create the payment request.</td> </tr> <tr> <td>barcodeType</td> <td>String</td> <td>Indicates the provider of a barcode, e.g. ‘ticketek’</td> </tr> <tr> <td>collectionId</td> <td>String</td> <td>The identifier of the token collection</td> </tr> <tr> <td>expirySeconds</td> <td>Number</td> <td>The expiry seconds used to configure the payment request expiry.</td> </tr> <tr> <td>lineItems</td> <td>Array</td> <td><strong>EXPERIMENTAL</strong> The <a href="#line-item">Line Items</a> being paid for.</td> </tr> <tr> <td>purchaseOrderRef</td> <td>String</td> <td>A reference to a purchase order for this payment request.</td> </tr> <tr> <td>invoiceRef</td> <td>String</td> <td>A reference to an invoice for this payment request. Must be less than or equal to 128 characters.</td> </tr> <tr> <td>redirectUrl</td> <td>String</td> <td><strong>Experimental</strong> URL to redirect the user to after they pay or cancel the Payment Request. Must start with one of the <code class="language-plaintext highlighter-rouge">allowedRedirectUrls</code> for the <a href="/api/merchant-configs">Merchant Config</a>.</td> </tr> <tr> <td>externalRef</td> <td>String</td> <td>An external reference to the payment request</td> </tr> <tr> <td>terminalId</td> <td>String</td> <td>The software or logical id of the payment terminal.</td> </tr> <tr> <td>deviceId</td> <td>String</td> <td>The hardware id or serial number of the payment terminal.</td> </tr> <tr> <td>operatorId</td> <td>String</td> <td>POS operator Id.</td> </tr> <tr> <td>createdByAccountId</td> <td>String</td> <td>Id of the <a href="/api/accounts">Centrapay Account</a> creating the Payment Request.</td> </tr> <tr> <td>createdByAccountName</td> <td>String</td> <td>Name of the <a href="/api/accounts">Centrapay Account</a> creating the Payment Request.</td> </tr> <tr> <td>conditionsEnabled</td> <td>Boolean</td> <td>Flag to indicate that a merchant is able to accept <a href="#payment-condition">Payment Conditions</a>.</td> </tr> <tr> <td>patronNotPresent</td> <td>Boolean</td> <td>Flag to indicate the patron is not physically present. This may affect payment conditions or available <a href="#payment-option">Payment Options</a>.</td> </tr> <tr> <td>cancellationReason</td> <td>String</td> <td>The reason that the payment request was cancelled. See <a href="#cancellation-reasons">Cancellation Reasons</a> for possible values.</td> </tr> <tr> <td>preAuth</td> <td>Boolean</td> <td>Flag to indicate the if the request is a Pre Auth for supported <a href="/api/asset-types">Asset Types</a>.</td> </tr> <tr> <td>preAuthExpiresAt</td> <td><a href="/api/data-types#timestamp ">Timestamp </a></td> <td>Pre Auth completions and releases will be accepted until this time.</td> </tr> <tr> <td>preAuthStatus</td> <td>String</td> <td>Describes which state a Pre Auth Payment Request is in. Valid values are “authorized”, or “released”.</td> </tr> <tr> <td>taxNumber</td> <td><a href="/api/businesses#tax-number">Tax Number</a></td> <td>The value-added tax configuration for the <a href="/api/businesses">Business</a> that the <a href="/api/merchants">Merchant</a> belongs to.</td> </tr> <tr> <td>remainingAmount</td> <td><a href="/api/data-types#bignumber ">BigNumber </a></td> <td>The amount of the payment request which has not been paid for.</td> </tr> <tr> <td>basketAmount</td> <td><a href="/api/data-types#bignumber ">BigNumber </a></td> <td>The total amount of the transaction including non Centrapay payment methods.</td> </tr> <tr> <td>partialAllowed</td> <td>Boolean</td> <td>Flag to indicate that the payment request can be paid for partially</td> </tr> </tbody> </table></div> <h3 id="payment-option"> <a href="#payment-option" aria-labelledby="payment-option" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Payment Option </h3> <h4> Mandatory Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>assetType</td> <td>String</td> <td>An <a href="/api/asset-types">Asset Type</a> reference.</td> </tr> <tr> <td>amount</td> <td><a href="/api/data-types#bignumber ">BigNumber </a></td> <td>The value required to pay using the canonical units for the asset type.</td> </tr> </tbody> </table></div> <h4> Optional Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>bitcoinAddress</td> <td>String</td> <td>★ Address to send Bitcoin, when the “assetType” is <code class="language-plaintext highlighter-rouge">bitcoin.*</code></td> </tr> <tr> <td>cennzAddress</td> <td>String</td> <td>★ Address to send CPay, when the “assetType” is <code class="language-plaintext highlighter-rouge">cennznet.*</code></td> </tr> <tr> <td>wavesAddress</td> <td>String</td> <td>★ Waves address to send Zap tokens, when the “assetType” is <code class="language-plaintext highlighter-rouge">zap.*</code></td> </tr> <tr> <td>productCodes</td> <td>Array</td> <td>Supported product codes for the payment request, when the “assetType” is <code class="language-plaintext highlighter-rouge">epay.nzd.*</code></td> </tr> <tr> <td>acceptedCollections</td> <td>Array</td> <td><a href="#accepted-collection">Accepted Collections</a> for the payment request, when the “assetType” is <code class="language-plaintext highlighter-rouge">centrapay.token.*</code></td> </tr> </tbody> </table></div> <p>★ For payment options which specify an address, there’s a requirement to make a transaction on an external ledger. Once you have made that payment, you can use the transaction id to <a href="#pay">Pay a Payment Request</a> using the legacy payment API.</p> <p><a name="payment-condition"></a></p> <h3 id="accepted-collection"> <a href="#accepted-collection" aria-labelledby="accepted-collection" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Accepted Collection </h3> <p>If a Payment Request contains a <code class="language-plaintext highlighter-rouge">centrapay.token.*</code> <a href="#payment-option">Payment Option</a> an array of Accepted Collections will be present inside the <code class="language-plaintext highlighter-rouge">centrapay.token</code> Payment Option. The Accepted Collections returned can be used to determine if a <a href="/api/tokens">Centrapay Token</a> can be used to pay a Payment Request, and the line items able to be purchased using the token.</p> <h4> Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>id</td> <td>String</td> <td>The id of a collection that the merchant accepts for the given Payment Request</td> </tr> <tr> <td>lineItems</td> <td>Array</td> <td>The <a href="#line-item">Line Items</a> that can be purchased by a <a href="/api/tokens">Centrapay Token</a> with matching collection id</td> </tr> </tbody> </table></div> <h3 id="payment-condition"> <a href="#payment-condition" aria-labelledby="payment-condition" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Payment Condition </h3> <p>Some <a href="/api/asset-types">Asset Types</a> require conditional approval to pay. Possible Payment Conditions include confirming proof of ID or confirming a promotional item was purchased.</p> <p>The <code class="language-plaintext highlighter-rouge">conditionsEnabled</code> flag should be set to true when <a href="#create-a-payment-request">Creating a Payment Request</a> to indicate that Payment Conditions can be accepted. If a Payment Condition arises, the absence of the <code class="language-plaintext highlighter-rouge">conditionsEnabled</code> flag will result in the Payment Request being cancelled.</p> <p>Conditions can either be <a href="#accept-payment-condition">accepted</a> or <a href="#accept-payment-condition">declined</a>. If a condition is declined, the Payment Request will be cancelled.</p> <h4> Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>id</td> <td><a href="/api/data-types#bignumber ">BigNumber </a></td> <td>An enumerated identifier for the Payment Condition.</td> </tr> <tr> <td>name</td> <td>String</td> <td>The name of the condition.</td> </tr> <tr> <td>message</td> <td>String</td> <td>The human-readable description of the condition.</td> </tr> <tr> <td>status</td> <td>String</td> <td>The status of the condition. Valid values include <code class="language-plaintext highlighter-rouge">accepted</code>, <code class="language-plaintext highlighter-rouge">declined</code>, <code class="language-plaintext highlighter-rouge">awaiting-merchant</code> or <code class="language-plaintext highlighter-rouge">void</code>.</td> </tr> </tbody> </table></div> <h3 id="line-item"> <a href="#line-item" aria-labelledby="line-item" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Line Item </h3> <p>An order item for which payment is requested. The currency and units for a line item price will be consistent with the payment request value and the sum of line item prices should equal the payment request value.</p> <p>Line items can include a discount amount. A discount that applies to multiple line items may be represented as a separate line item with a negative amount.</p> <h4> Mandatory Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>name</td> <td>String</td> <td>The product description.</td> </tr> <tr> <td>sku</td> <td>String</td> <td>The product (stock keeping unit) code.</td> </tr> <tr> <td>qty</td> <td><a href="/api/data-types#bignumber ">BigNumber </a></td> <td>The product quantity (eg. item count, weight, volume etc).</td> </tr> <tr> <td>price</td> <td><a href="/api/data-types#bignumber ">BigNumber </a></td> <td>The total price in cents for the line item (eg. price = product price * qty - discounts + tax).</td> </tr> </tbody> </table></div> <h4> Optional Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>tax</td> <td><a href="/api/data-types#bignumber ">BigNumber </a></td> <td>Tax rate (percentage).</td> </tr> <tr> <td>discount</td> <td><a href="/api/data-types#bignumber ">BigNumber </a></td> <td>Discount amount in cents (tax exclusive).</td> </tr> <tr> <td>productId</td> <td>String</td> <td>Manufacturer’s product identifier (eg GTIN/EAN).</td> </tr> <tr> <td>restricted</td> <td>Boolean</td> <td>Disallow payment with a “restricted” <a href="/api/asset-types">Asset Type</a>.</td> </tr> <tr> <td>classification</td> <td>Object</td> <td><a href="#product-classification">Product Classification</a>.</td> </tr> </tbody> </table></div> <h3 id="product-classification"> <a href="#product-classification" aria-labelledby="product-classification" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Product Classification </h3> <h4> Mandatory Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>type</td> <td>String</td> <td>The classification type (see below).</td> </tr> <tr> <td>code</td> <td>String</td> <td>The classification code.</td> </tr> <tr> <td>name</td> <td>String</td> <td>The classification title.</td> </tr> </tbody> </table></div> <h4> Optional Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>props</td> <td>Map</td> <td>The product classification properties (see below).</td> </tr> </tbody> </table></div> <h4> Classification Types </h4> <p>Currently only “GS1” is supported. See <a href="https://www.gs1.org/standards/gpc" class="external">GS1 Global Product Classification</a>. When “GS1” is used as the product classification type then the product code should be the GPC product brick identifier.</p> <h4> Classification Properties </h4> <p>Classification properties allow optional additional product characterizing attrubutes to be supplied. In the case of GS1 product classifications this corresponds to the GPC brick attributes.</p> <h3 id="paid-by"> <a href="#paid-by" aria-labelledby="paid-by" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Paid By </h3> <p>The Paid By provides a summary of the transactions after the Payment Request was paid.</p> <h4> Mandatory Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>assetTotals</td> <td>Array</td> <td>The sum of paid amounts <a href="#asset-total">Asset Totals</a> for each transacted asset type.</td> </tr> </tbody> </table></div> <h3 id="asset-total"> <a href="#asset-total" aria-labelledby="asset-total" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Asset Total </h3> <h4> Mandatory Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>type</td> <td>String</td> <td>The asset type used for the payment.</td> </tr> <tr> <td>description</td> <td>String</td> <td>A human readable description of the asset type used.</td> </tr> <tr> <td>settlementDate</td> <td><a href="/api/data-types#timestamp ">Timestamp </a></td> <td>The estimated date that the merchant can expect settlement of funds.</td> </tr> <tr> <td>total</td> <td><a href="/api/data-types#monetary ">Monetary </a></td> <td>The total monetary value of the asset type used to pay a Payment Request</td> </tr> </tbody> </table></div> <h4> Optional Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>lineItems</td> <td>Array <span class="cp-badge">Optional</span></td> <td><strong>Experimental</strong> The <a href="#line-item">Line Items</a> paid for by the asset type.</td> </tr> </tbody> </table></div> <p><a name="payment-activity"></a></p> <h3 id="payment-activity"> <a href="#payment-activity" aria-labelledby="payment-activity" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Payment Activity </h3> <p>A Payment Activity records a transaction that has happened on a <a href="#payment-request">Payment Request</a>. Payment Activities are created when a Payment Request has been <strong>created</strong>, <strong>paid</strong>, <strong>refunded</strong>, <strong>cancelled</strong>, or <strong>expired</strong>.</p> <h4> Mandatory Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>type</td> <td>String</td> <td>See Activity Types below.</td> </tr> <tr> <td>value</td> <td><a href="/api/data-types#monetary ">Monetary </a></td> <td>The value of the payment activity. Must be less than 100000000 and positive.</td> </tr> <tr> <td>paymentRequestId</td> <td>String</td> <td>The Payment Request’s id.</td> </tr> <tr> <td>merchantId</td> <td>String</td> <td>The Payment Request’s <a href="/api/merchants">Merchant</a> id.</td> </tr> <tr> <td>merchantConfigId</td> <td>String</td> <td>The Payment Request’s <a href="/api/merchant-configs">Merchant Config</a> id.</td> </tr> <tr> <td>merchantAccountId</td> <td>String</td> <td>The Payment Request’s Merchant <a href="/api/accounts">Account</a> id.</td> </tr> <tr> <td>merchantName</td> <td>String</td> <td>The Payment Request’s Merchant name.</td> </tr> <tr> <td>createdAt</td> <td><a href="/api/data-types#timestamp ">Timestamp </a></td> <td>When the activity was created.</td> </tr> <tr> <td>createdBy</td> <td><a href="/api/data-types#crn ">CRN </a></td> <td>The identity that created the activity.</td> </tr> <tr> <td>paymentRequestCreatedBy</td> <td><a href="/api/data-types#crn ">CRN </a></td> <td>The identity that created the Payment Request.</td> </tr> <tr> <td>activityNumber</td> <td><a href="/api/data-types#bignumber ">BigNumber </a></td> <td>Unique sequential number for the activity.</td> </tr> <tr> <td>shortCode</td> <td>String</td> <td>A shorter id that can be used for up to two years.</td> </tr> </tbody> </table></div> <h4> Optional Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>assetType</td> <td>String</td> <td>The <a href="/api/asset-types">Asset Type</a> for the “payment” or “refund” activity.</td> </tr> <tr> <td>external</td> <td>Boolean</td> <td>The payment activity is recording a transaction that occurred outside the Centrapay system.</td> </tr> <tr> <td>cancellationReason</td> <td>String</td> <td>The reason that the <a href="#payment-request">Payment Request</a> was cancelled. See <a href="#cancellation-reasons">Cancellation Reasons</a> for possible values.</td> </tr> <tr> <td>conditionId</td> <td>Number</td> <td>The id of a condition if the activity was for a condition being accepted or declined.</td> </tr> <tr> <td>idempotencyKey</td> <td>String</td> <td>Required when confirming a Payment Request. This is an identifier from your system to enforce uniqueness.</td> </tr> <tr> <td>confirmationIdempotencyKey</td> <td>String</td> <td>Required when refunding a Pre Auth Confirmation. Should be the same as the idempotencyKey used for Confirmation.</td> </tr> </tbody> </table></div> <h4> Activity Types </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Name</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>request</td> <td><a href="#payment-request">Payment Request</a> was created.</td> </tr> <tr> <td>preAuthRequest</td> <td><a href="#payment-request">Payment Request</a> was created with the <code class="language-plaintext highlighter-rouge">preAuth</code> flag set to “true”.</td> </tr> <tr> <td>payment</td> <td><a href="#payment-request">Payment Request</a> was paid.</td> </tr> <tr> <td>refund</td> <td>Funds were returned to the shopper.</td> </tr> <tr> <td>cancellation</td> <td><a href="#payment-request">Payment Request</a> was cancelled by the merchant or the shopper.</td> </tr> <tr> <td>expiry</td> <td><a href="#payment-request">Payment Request</a> wasn’t paid before time out.</td> </tr> <tr> <td>accept-condition</td> <td>A <a href="#payment-condition">Payment Condition</a> was accepted.</td> </tr> <tr> <td>decline-condition</td> <td>A <a href="#payment-condition">Payment Condition</a> was declined.</td> </tr> <tr> <td>authorization</td> <td>A Pre Auth <a href="#payment-request">Payment Request</a> was approved and confirmations can be made against it.</td> </tr> <tr> <td>confirmation</td> <td>Funds on a Pre Auth have been drawn down on.</td> </tr> <tr> <td>release</td> <td>Pre Auth has been finalised and any remaining funds from Authorization have been returned.</td> </tr> </tbody> </table></div> <p><a name="cancellation-reasons"></a></p> <h4> Cancellation Reasons </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Reason</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>CANCELLED_BY_MERCHANT</td> <td>The merchant cancelled the payment request by calling the cancel or void endpoint.</td> </tr> <tr> <td>CANCELLED_BY_PATRON</td> <td>The patron cancelled the transaction.</td> </tr> <tr> <td>PATRON_CODE_INVALID</td> <td>The patron code on the payment request was invalid.</td> </tr> <tr> <td>PAYMENT_FAILED</td> <td>The payment request failed for an unknown reason.</td> </tr> <tr> <td>PATRON_CODE_EXPIRED</td> <td>The patron code on the payment request has expired.</td> </tr> <tr> <td>DECLINED_BY_PATRON</td> <td>The payment was declined by the patron during approval steps.</td> </tr> <tr> <td>DECLINED_BY_MERCHANT</td> <td>The payment was declined by the merchant during approval steps.</td> </tr> <tr> <td>PAYMENT_DECLINED</td> <td>The payment parameters were valid but payment was declined because additional payment restrictions were violated. For example, asset not active, asset overdrawn, quota exceeded or line item category restrictions.</td> </tr> <tr> <td>PAYMENT_REQUEST_EXPIRED</td> <td>The payment request has expired.</td> </tr> <tr> <td>NO_AVAILABLE_PAYMENT_OPTIONS</td> <td>No payment options match the requested payment parameters.</td> </tr> <tr> <td>INACTIVE_ASSET</td> <td>The asset used to pay the payment request is inactive.</td> </tr> </tbody> </table></div> <h2 id="operations"> <a href="#operations" aria-labelledby="operations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Operations </h2> <p><a name="create-payment-request"></a></p> <h3 id="create-a-payment-request"> <a href="#create-a-payment-request" aria-labelledby="create-a-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Create a Payment Request </h3> <p> POST <code>/<wbr />api/<wbr />payment-requests</code> <h4> Create a Payment Request </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "configId": "5efbe2fb96c08357bb2b9242",
    "value": {
      "amount": "8991",
      "currency": "NZD"
    }
  }'</span></code></pre></div> <h4> Create a Payment Request with redirect url </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "configId": "5efbe2fb96c08357bb2b9242",
    "value": {
      "amount": "8991",
      "currency": "NZD"
    },
    "redirectUrl": "https://example.com/store/checkout?cartId=1234"
  }'</span></code></pre></div> <h4> Create a Payment Request with a Barcode </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "barcode": "1219210961929460",
    "configId": "5efbe2fb96c08357bb2b9242",
    "value": {
      "amount": "8991",
      "currency": "NZD"
    }
  }'</span></code></pre></div> <h4> Create a Pre Auth Payment Request </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "barcode": "1219210961929460",
    "configId": "5efbe2fb96c08357bb2b9242",
    "value": {
      "amount": "8991",
      "currency": "NZD"
    },
    "preAuth": true
  }'</span></code></pre></div> <h4> Create a Payment Request with purchase order, invoice, and external reference </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "configId": "5efbe2fb96c08357bb2b9242",
    "value": {
      "amount": "8991",
      "currency": "NZD"
    },
    "purchaseOrderRef": "oF6kj1QlH5gK0y9rjRHFh2",
    "invoiceRef": "sy8CRmo3sp3ArOpnfmb423",
    "externalRef": "dYTC266s4DFdsgGd909f"
  }'</span></code></pre></div> <h4> Create a Payment Request with Line Items </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "configId": "5efbe2fb96c08357bb2b9242",
    "value": {
      "amount": "6190",
      "currency": "NZD"
    },
    "lineItems": [
      {
        "name": "Coffee Grounds",
        "sku": "GH1234",
        "qty": "1",
        "price": "4195",
        "tax": "15.00"
      },
      {
        "name": "Centrapay Cafe Mug",
        "sku": "SB456",
        "qty": "25",
        "price": "1995",
        "tax": "15.00",
        "discount": "199",
        "restricted": true,
        "productId": "19412345123459",
        "classification": {
          "type": "GS1",
          "code": "10001874",
          "name": "CROCKERY",
          "props": {
            "20001479": "30008960"
          }
        }
      }
    ]
  }'</span></code></pre></div> <h4> Create a Payment Request with Line Items and Partial Pay </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "configId": "5efbe2fb96c08357bb2b9242",
    "value": {
      "amount": "6190",
      "currency": "NZD"
    },
    "partialAllowed": true,
    "basketAmount": "10000",
    "lineItems": [
      {
        "name": "Coffee Grounds",
        "sku": "GH1234",
        "qty": "1",
        "price": "4195",
        "tax": "15.00"
      },
      {
        "name": "Centrapay Cafe Mug",
        "sku": "SB456",
        "qty": "25",
        "price": "1995",
        "tax": "15.00",
        "discount": "199",
        "restricted": true,
        "productId": "19412345123459",
        "classification": {
          "type": "GS1",
          "code": "10001874",
          "name": "CROCKERY",
          "props": {
            "20001479": "30008960"
          }
        }
      }
    ]
  }'</span></code></pre></div> <h4> Create a Payment Request with barcode, barcodeType, and collectionId </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "configId": "5efbe2fb96c08357bb2b9242",
    "value": {
      "amount": "25",
      "currency": "NZD"
    },
    "barcode": "6273d06820db5ec22914f697c95b07122",
    "barcodeType": "ticketek",
    "collectionId": "C12345",
    "lineItems": [
      {
        "name": "Coffee Grounds",
        "sku": "GH1234",
        "qty": "1",
        "price": "4195",
        "tax": "15.00"
      },
      {
        "name": "Centrapay Cafe Mug",
        "sku": "SB456",
        "qty": "25",
        "price": "1995",
        "tax": "15.00",
        "discount": "199",
        "restricted": true,
        "productId": "19412345123459",
        "classification": {
          "type": "GS1",
          "code": "10001874",
          "name": "CROCKERY",
          "props": {
            "20001479": "30008960"
          }
        }
      }
    ]
  }'</span></code></pre></div> </p> <h4> Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Field</th> <th style="text-align: left">Type</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">configId</td> <td style="text-align: left">String</td> <td style="text-align: left">The <a href="/api/merchant-configs">Merchant Config</a> id used to configure the payment options.</td> </tr> <tr> <td style="text-align: left">value</td> <td style="text-align: left"><a href="/api/data-types#monetary ">Monetary </a></td> <td style="text-align: left">The canonical value of the payment request. Must be positive.</td> </tr> <tr> <td style="text-align: left">barcode</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">The <a href="/api/scanned-codes">Scanned Code</a> to identify the account to attach the payment request to</td> </tr> <tr> <td style="text-align: left">barcodeType</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">Indicates the provider of a barcode, e.g. ‘ticketek’</td> </tr> <tr> <td style="text-align: left">collectionId</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">The identifier of the token collection</td> </tr> <tr> <td style="text-align: left">expirySeconds</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">How long the payment request will be payable for. Maximum value: 86400 (24 hours).</td> </tr> <tr> <td style="text-align: left">lineItems</td> <td style="text-align: left">Array <span class="cp-badge">Optional</span></td> <td style="text-align: left"><strong>Experimental</strong> The <a href="#line-item">Line Items</a> being paid for.</td> </tr> <tr> <td style="text-align: left">purchaseOrderRef</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">A reference to a purchase order for this payment request.</td> </tr> <tr> <td style="text-align: left">invoiceRef</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">A reference to an invoice for this payment request. Must be less than or equal to 128 characters.</td> </tr> <tr> <td style="text-align: left">externalRef</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">An external reference to the payment request</td> </tr> <tr> <td style="text-align: left">redirectUrl</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left"><strong>Experimental</strong> URL to redirect the user to after they pay or cancel the Payment Request. Must start with one of the <code class="language-plaintext highlighter-rouge">allowedRedirectUrls</code> for the <a href="/api/merchant-configs">Merchant Config</a>.</td> </tr> <tr> <td style="text-align: left">terminalId</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">The software or logical id of the payment terminal.</td> </tr> <tr> <td style="text-align: left">deviceId</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">The hardware id or serial number of the payment terminal.</td> </tr> <tr> <td style="text-align: left">operatorId</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">The POS operator Id.</td> </tr> <tr> <td style="text-align: left">conditionsEnabled</td> <td style="text-align: left">Boolean <span class="cp-badge">Optional</span></td> <td style="text-align: left">Flag to opt into accepting <a href="/api/asset-types">Asset Types</a> which require conditions to be met. If not set, assets which require conditions will not be payment options.</td> </tr> <tr> <td style="text-align: left">patronNotPresent</td> <td style="text-align: left">Boolean <span class="cp-badge">Optional</span></td> <td style="text-align: left">Flag to indicate the patron is not physically present. This may affect payment conditions or available <a href="#payment-option">Payment Options</a>.</td> </tr> <tr> <td style="text-align: left">preAuth</td> <td style="text-align: left">Boolean <span class="cp-badge">Optional</span></td> <td style="text-align: left">Flag to indicate if the Payment Request is a Pre Auth for supported <a href="/api/asset-types">Asset Types</a>. If set barcode must be provided.</td> </tr> <tr> <td style="text-align: left">partialAllowed</td> <td style="text-align: left">Boolean <span class="cp-badge">Optional</span></td> <td style="text-align: left">Flag to indicate if the Payment Request can be partially paid for. If set basketAmount must be provided.</td> </tr> <tr> <td style="text-align: left">basketAmount</td> <td style="text-align: left"><a href="/api/data-types#monetary ">Monetary </a> <span class="cp-badge">Optional</span></td> <td style="text-align: left">The total amount of the payment expected from the customer, including payments outside of Centrapay. Must be less than 100000000 and positive. If provided partialAllowed must also be set.</td> </tr> </tbody> </table></div> <h4> Example response payload </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.centrapay.com/pay/MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"patronCodeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V17FByEP9gm1shSG6a1Zzx"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"barcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9990001234567895"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"barcodeType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ticketek"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"collectionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C12345"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"purchaseOrderRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oF6kj1QlH5gK0y9rjRHFh2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sy8CRmo3sp3ArOpnfmb423"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"paymentOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.test"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"epay.nzd.test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"productCodes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"23403"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.token.test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"acceptedCollections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QWNB6jurnBczmvXDVfRuMK"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"lineItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coffee Grounds"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GH1234"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4195"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"lineItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coffee Grounds"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GH1234"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4195"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Cafe Mug"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SB456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1995"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"199"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"merchantConditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:06:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liveness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expirySeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Error Responses </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Status</th> <th style="text-align: left">Code</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">400</td> <td style="text-align: left">LINE_<wbr />ITEMS_<wbr />SUM_<wbr />CHECK_<wbr />FAILED</td> <td style="text-align: left">The sum value of the line items did not equal the value of the payment request.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REDIRECT_<wbr />URL_<wbr />INVALID</td> <td style="text-align: left">The supplied redirectUrl does not start with one of the <code class="language-plaintext highlighter-rouge">allowedRedirectUrls</code> on the <a href="/api/merchant-configs">Merchant Config</a>.</td> </tr> <tr> <td style="text-align: left">400</td> <td style="text-align: left">CHECKSUM_<wbr />FAILED</td> <td style="text-align: left">Luhn checksum digit doesn’t pass.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PATRON_<wbr />CODE_<wbr />INVALID</td> <td style="text-align: left">Patron Code doesn’t exist or has expired.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">NO_<wbr />AVAILABLE_<wbr />PAYMENT_<wbr />OPTIONS</td> <td style="text-align: left">No payment options match the requested payment parameters.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">TOKEN_<wbr />COLLECTION_<wbr />NOT_<wbr />FOUND</td> <td style="text-align: left">The token collection does not exist.</td> </tr> </tbody> </table></div> <p><a name="get-payment-request"></a></p> <h3 id="get-a-payment-request"> <a href="#get-a-payment-request" aria-labelledby="get-a-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get a Payment Request </h3> <p> GET <code>/<wbr />api/<wbr />payment-requests/<wbr />{paymentRequestId}</code> <h4> </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl https://service.centrapay.com/api/payment-requests/MhocUmpxxmgdHjr7DgKoKw <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: </span><span class="nv">$jwt</span><span class="s2">"</span></code></pre></div> </p> <h4> Example response payload </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.centrapay.com/pay/MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"patronCodeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V17FByEP9gm1shSG6a1Zzx"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"barcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9990001234567895"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"purchaseOrderRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oF6kj1QlH5gK0y9rjRHFh2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sy8CRmo3sp3ArOpnfmb423"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8991"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"paymentOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8991"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.test"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.token.test"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"acceptedCollections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QWNB6jurnBczmvXDVfRuMK"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"lineItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coffee Grounds"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GH1234"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4195"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"lineItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coffee Grounds"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GH1234"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4195"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Cafe Mug"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SB456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1995"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"199"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"merchantConditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"photo-id-check"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"message"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Please check ID"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"awaiting-merchant"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:06:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liveness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expirySeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Example response payload paid by multiple asset types </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.centrapay.com/pay/MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6910"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"paymentOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6910"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6910"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.token.main"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"acceptedCollections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"QWNB6jurnBczmvXDVfRuMK"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"lineItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
              </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coffee Grounds"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GH1234"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4195"</span><span class="p">,</span><span class="w">
              </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">]</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"lineItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coffee Grounds"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GH1234"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4195"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Cafe Mug"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SB456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1995"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"199"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"merchantConditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"paid"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:06:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liveness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expirySeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paidBy"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"assetTotals"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay NZD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"settlementDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-28T04:04:27.426Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1995"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.token.main"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Token"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"settlementDate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-28T04:04:27.426Z"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4195"</span><span class="p">,</span><span class="w">
          </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="nl">"lineItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coffee Grounds"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GH1234"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4195"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Example response payload for a Pre Auth Payment Request </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.centrapay.com/pay/MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"barcode"</span><span class="p">:</span><span class="w"> </span><span class="mi">503901342</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"paymentOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"farmlands.nzd.main"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"merchantConditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:06:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liveness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"main"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expirySeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="p">,</span><span class="w">
  </span><span class="nl">"preAuth"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"preAuthStatus"</span><span class="p">:</span><span class="w"> </span><span class="s2">"authorized"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"preAuthExpiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-09-08T04:04:27.426Z"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h3 id="get-a-payment-request-by-short-code"> <a href="#get-a-payment-request-by-short-code" aria-labelledby="get-a-payment-request-by-short-code" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get a Payment Request by Short Code </h3> <p>Returns the latest Payment Request that matches the given short code.</p> <p> GET <code>/<wbr />api/<wbr />payment-requests/<wbr />short-code/<wbr />{shortCode}</code> <h4> </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl https://service.centrapay.com/api/payment-requests/short-code/CP-C7F-ZS5 <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: </span><span class="nv">$jwt</span><span class="s2">"</span></code></pre></div> </p> <h4> Example response payload with a Payment Request </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.centrapay.com/pay/MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"patronCodeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V17FByEP9gm1shSG6a1Zzx"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"barcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9990001234567895"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"paymentOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.test"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"merchantConditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:06:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liveness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expirySeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Error Responses </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Status</th> <th style="text-align: left">Code</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">400</td> <td style="text-align: left">CHECKSUM_<wbr />FAILED</td> <td style="text-align: left">Luhn checksum digit doesn’t pass.</td> </tr> </tbody> </table></div> <p><a name="patron-code"></a></p> <h3 id="get-a-payment-request-linked-to-a-patron-code"> <a href="#get-a-payment-request-linked-to-a-patron-code" aria-labelledby="get-a-payment-request-linked-to-a-patron-code" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Get a Payment Request linked to a Patron Code </h3> <p>Returns the latest Payment Request with status “new” that has been attached to a <a href="/api/patron-codes">Patron Code</a>. The Payment Request may have been created with a reference to any Patron Code owned by the user’s account.</p> <p>This endpoint should be polled just after a user’s Patron Code has been scanned. This will allow them to find the Payment Request and proceed to pay.</p> <p> GET <code>/<wbr />api/<wbr />me/<wbr />patron-code-payment-request</code> <h4> </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl https://service.centrapay.com/api/me/patron-code-payment-request <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: </span><span class="nv">$jwt</span><span class="s2">"</span></code></pre></div> </p> <h4> Example response payload when no new Payment Request found </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Example response payload with a Payment Request </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://app.centrapay.com/pay/MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"patronCodeId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"V17FByEP9gm1shSG6a1Zzx"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"barcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9990001234567895"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"configId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"paymentOptions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.test"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"merchantConditions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">

  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"new"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expiresAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:06:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"liveness"</span><span class="p">:</span><span class="w"> </span><span class="s2">"test"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"expirySeconds"</span><span class="p">:</span><span class="w"> </span><span class="mi">120</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <p><a name="pay"></a></p> <h3 id="pay-a-payment-request"> <a href="#pay-a-payment-request" aria-labelledby="pay-a-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Pay a Payment Request </h3> <p>To pay a payment request you must supply the name of the <a href="/api/asset-types">Asset Type</a> and one of <code class="language-plaintext highlighter-rouge">assetId</code>, <code class="language-plaintext highlighter-rouge">transactionId</code> or <code class="language-plaintext highlighter-rouge">authorization</code>. Use assetId if the <a href="/api/asset-types">Asset Type</a> is managed by Centrapay. Use transactionId to verify an external transaction such as a Bitcoin payment. Use authorization to authorize an external transaction.</p> <p> POST <code>/<wbr />api/<wbr />payment-requests/<wbr />{paymentRequestId}/<wbr />pay</code> <h4> Pay a Payment Request with a Centrapay asset </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/<span class="o">{</span>paymentRequestId<span class="o">}</span>/pay <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: </span><span class="nv">$jwt</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "assetType": "centrapay.nzd.main",
    "assetId": "WRhAxxWpTKb5U7pXyxQjjY"
  }'</span></code></pre></div> <h4> Pay a Payment Request using external transaction </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/<span class="o">{</span>paymentRequestId<span class="o">}</span>/pay <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: </span><span class="nv">$jwt</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "assetType": "bitcoin.main",
    "transactionId": "VMXMkUttDGTVz4ESv5ND56"
  }'</span></code></pre></div> <h4> Pay a Payment Request using authorization </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/<span class="o">{</span>paymentRequestId<span class="o">}</span>/pay <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: </span><span class="nv">$jwt</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "assetType": "stadius.main",
    "authorization": "LiOkwEtDGTVz4ESv5NS83"
  }'</span></code></pre></div> <h4> Partially Pay a Payment Request </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/<span class="o">{</span>paymentRequestId<span class="o">}</span>/pay <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: </span><span class="nv">$jwt</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "assetType": "centrapay.nzd.main",
    "assetId": "WRhAxxWpTKb5U7pXyxQjjY",
    "amount": "200",
    "mode": "partial-payment"
  }'</span></code></pre></div> </p> <h4> Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Field</th> <th style="text-align: left">Type</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">assetType</td> <td style="text-align: left">String</td> <td style="text-align: left">The name of the <a href="/api/asset-types">Asset Type</a>.</td> </tr> <tr> <td style="text-align: left">assetId</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">The id of the Asset being used to make payment.</td> </tr> <tr> <td style="text-align: left">transactionId</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">Used to verify an external transaction eg Bitcoin.</td> </tr> <tr> <td style="text-align: left">authorization</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">Used to authorize an external transaction.</td> </tr> <tr> <td style="text-align: left">mode</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">The mode of payment valid value is <code class="language-plaintext highlighter-rouge">parital-payment</code>.</td> </tr> <tr> <td style="text-align: left">amount</td> <td style="text-align: left">String <span class="cp-badge">Optional</span></td> <td style="text-align: left">The amount being paid if less than the Payment Request amount.</td> </tr> </tbody> </table></div> <p>One of either <code class="language-plaintext highlighter-rouge">assetId</code>, <code class="language-plaintext highlighter-rouge">transactionId</code> or <code class="language-plaintext highlighter-rouge">authorization</code> must be provided.</p> <h4> Example response payload </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-015"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"mode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"partial-payment"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Error Responses </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Status</th> <th style="text-align: left">Code</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INVALID_<wbr />ASSET_<wbr />TYPE</td> <td style="text-align: left">Either the merchant is not configured with the provided asset type or the asset type does not exist.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REQUEST_<wbr />EXPIRED</td> <td style="text-align: left">Action cannot be completed because the request has expired.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REQUEST_<wbr />PAID</td> <td style="text-align: left">Action cannot be completed because the request has been paid.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REQUEST_<wbr />CANCELLED</td> <td style="text-align: left">Action cannot be completed because the request has already been cancelled.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INACTIVE_<wbr />ASSET</td> <td style="text-align: left">The asset is not spendable. It may have been disabled, expired, or already spent.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INVALID_<wbr />MERCHANT_<wbr />CONFIG</td> <td style="text-align: left">The merchant is not configured properly to satisfy the payment request. This could be due to incorrect information, or the merchant’s credentials might be blocked by an external service.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">QUOTA_<wbr />EXCEEDED</td> <td style="text-align: left">The payment pay request exceeds the allowed spend quota supplied.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INSUFFICIENT_<wbr />ASSET_<wbr />VALUE</td> <td style="text-align: left">The asset has insufficient funds to pay the payment request or the transaction amount received by Centrapay is less than the total of the payment.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">ASSET_<wbr />REDEMPTION_<wbr />DENIED</td> <td style="text-align: left">The asset redemption has been unsuccessful due to an error with provided payment parameters, the merchant, or the asset.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PAYMENT_<wbr />DECLINED</td> <td style="text-align: left">The payment parameters were valid but payment was declined because additional payment restrictions were violated.</td> </tr> </tbody> </table></div> <p><a name="refund"></a></p> <h3 id="refund-a-payment-request"> <a href="#refund-a-payment-request" aria-labelledby="refund-a-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Refund a Payment Request </h3> <p> POST <code>/<wbr />api/<wbr />payment-requests/<wbr />{paymentRequestId}/<wbr />refund</code> <h4> Refund a Payment Request </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/<span class="o">{</span>paymentRequestId<span class="o">}</span>/refund <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "value": {
      "amount": "100",
      "currency": "NZD"
    },
    "externalRef": "e8df06e2-13a5-48b4-b670-3fd6d815fe0a"
  }'</span></code></pre></div> <h4> Refund a Payment Request with Line Items </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/<span class="o">{</span>paymentRequestId<span class="o">}</span>/refund <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "value": {
      "amount": "6190",
      "currency": "NZD"
    },
    "externalRef": "e8df06e2-13a5-48b4-b670-3fd6d815fe0a",
    "lineItems": [
      {
        "name": "Coffee Grounds",
        "sku": "GH1234",
        "qty": "1",
        "price": "4195",
        "tax": "15.00"
      },
      {
        "name": "Centrapay Cafe Mug",
        "sku": "SB456",
        "qty": "25",
        "price": "1995",
        "tax": "15.00",
        "discount": "199",
        "restricted": true,
        "productId": "19412345123459",
        "classification": {
          "type": "GS1",
          "code": "10001874",
          "name": "CROCKERY",
          "props": {
            "20001479": "30008960"
          }
        }
      }
    ]
  }'</span></code></pre></div> <h4> Refund a Pre Auth Payment Request with Confirmations </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/<span class="o">{</span>paymentRequestId<span class="o">}</span>/refund <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "confirmationIdempotencyKey": "e8df06e2-13a5-48b4-b670-3fd6d815fe0a",
    "value": {
      "amount": "6190",
      "currency": "NZD"
    },
    "lineItems": [
      {
        "name": "Coffee Grounds",
        "sku": "GH1234",
        "qty": "1",
        "price": "4195",
        "tax": "15.00"
      },
      {
        "name": "Centrapay Cafe Mug",
        "sku": "SB456",
        "qty": "25",
        "price": "1995",
        "tax": "15.00",
        "discount": "199",
        "restricted": true,
        "productId": "19412345123459",
        "classification": {
          "type": "GS1",
          "code": "10001874",
          "name": "CROCKERY",
          "props": {
            "20001479": "30008960"
          }
        }
      }
    ]
  }'</span></code></pre></div> <h4> Refund a Payment Request with Invoice Reference </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/<span class="o">{</span>paymentRequestId<span class="o">}</span>/refund <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "value": {
      "amount": "100",
      "currency": "NZD"
    },
    "externalRef": "e8df06e2-13a5-48b4-b670-3fd6d815fe0a",
    "invoiceRef": "sy8CRmo3sp3ArOpnfmb423"
  }'</span></code></pre></div> </p> <h4> Example response payload </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refund"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-015"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-12T01:17:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"invoiceRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sy8CRmo3sp3ArOpnfmb423"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Error Responses </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Status</th> <th style="text-align: left">Code</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">403</td> <td style="text-align: left">NOT_<wbr />PAID</td> <td style="text-align: left">The Payment Request has not been paid.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">ALREADY_<wbr />REFUNDED</td> <td style="text-align: left">The Payment Request already been refunded. If you want to perfom additional refunds then an <code class="language-plaintext highlighter-rouge">externalRef</code> is required.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INVALID_<wbr />AMOUNT</td> <td style="text-align: left">The refund requested is greater than the refundable amount.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REPEAT_<wbr />REFERENCE</td> <td style="text-align: left">A refund has already been requested with the same external reference. Refunding the payment request twice with the same external reference is not allowed. If the amount of the refund is the same we assume it is a repeat request and return 200.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PARTIAL_<wbr />REFUNDS_<wbr />NOT_<wbr />ALLOWED</td> <td style="text-align: left">The Asset does not support partial refunds.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INACTIVE_<wbr />ASSET</td> <td style="text-align: left">The Asset is not refundable. It may have been disabled, expired, or already refunded.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REFUND_<wbr />NOT_<wbr />SUPPORTED</td> <td style="text-align: left">The Asset type does not support refunds.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REFUND_<wbr />WINDOW_<wbr />EXCEEDED</td> <td style="text-align: left">The time since the payment exceeds the window of time a payment request can be refunded in.</td> </tr> <tr> <td style="text-align: left">400</td> <td style="text-align: left">LINE_<wbr />ITEMS_<wbr />SUM_<wbr />CHECK_<wbr />FAILED</td> <td style="text-align: left">The sum value of the line items did not equal the value of the refund.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PRE_<wbr />AUTH_<wbr />PENDING</td> <td style="text-align: left">The Pre Auth Payment Request has yet to be authorized.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">CONFIRMATION_<wbr />NOT_<wbr />FOUND</td> <td style="text-align: left">The confirmationIdempotencyKey does not match a Confirmation on the Payment Request.</td> </tr> </tbody> </table></div> <p><a name="void"></a></p> <h3 id="void-a-payment-request"> <a href="#void-a-payment-request" aria-labelledby="void-a-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Void a Payment Request </h3> <p>Voiding a payment request will cancel the request and trigger any refunds if necessary.</p> <p> POST <code>/<wbr />api/<wbr />payment-requests/<wbr />{paymentRequestId}/<wbr />void</code> <h4> </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/MhocUmpxxmgdHjr7DgKoKw/void <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span></code></pre></div> </p> <h4> Example response payload when payment request is unpaid </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancellation"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cancellationReason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELLED_BY_MERCHANT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-032"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Example response payload when payment request is paid </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refund"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-032"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Error Responses </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Status</th> <th style="text-align: left">Code</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">403</td> <td style="text-align: left">VOID_<wbr />WINDOW_<wbr />EXCEEDED</td> <td style="text-align: left">The void window is closed 24 hours after the Payment Request <code class="language-plaintext highlighter-rouge">createdAt</code>. After the void window has closed if the Payment Request is paid, use <a href="#refund">Refund</a> endpoint to reverse the payment.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">ALREADY_<wbr />REFUNDED</td> <td style="text-align: left">The Payment Request has already been refunded.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REPEAT_<wbr />REFERENCE</td> <td style="text-align: left">A refund has already been requested with the same external reference. Refunding the payment request twice with the same external reference is not allowed. If the amount of the refund is the same we assume it is a repeat request and return 200.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INACTIVE_<wbr />ASSET</td> <td style="text-align: left">The Asset is not refundable. It may have been disabled, expired, or already refunded.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REFUND_<wbr />NOT_<wbr />SUPPORTED</td> <td style="text-align: left">The Asset type does not support refunds.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REQUEST_<wbr />EXPIRED</td> <td style="text-align: left">The Payment Request has expired.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PRE_<wbr />AUTH_<wbr />ALREADY_<wbr />CONFIRMED</td> <td style="text-align: left">The Pre Auth Payment Request already has confirmations. Use <a href="#refund">Refund</a> endpoint to reverse the transaction.</td> </tr> </tbody> </table></div> <p><a name="release"></a></p> <h3 id="release-funds-held-for-a-pre-auth-payment-request"> <a href="#release-funds-held-for-a-pre-auth-payment-request" aria-labelledby="release-funds-held-for-a-pre-auth-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Release funds held for a Pre Auth Payment Request </h3> <p>When you call release on a Pre Auth Payment Request any remaining funds that were being held for the authorization are returned to the asset, and a release Payment Activity is returned. If the authorization never completed, the Payment Request will instead be cancelled, and a cancellation Payment Activity will be returned.</p> <p> POST <code>/<wbr />api/<wbr />payment-requests/<wbr />{paymentRequestId}/<wbr />release</code> <h4> </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/MhocUmpxxmgdHjr7DgKoKw/release <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span></code></pre></div> </p> <h4> Example response payload when a Pre Auth is released </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"release"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"100"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"preAuth"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-015"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-12T01:17:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Example response payload when a Pre Auth is cancelled </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cancellation"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"cancellationReason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CANCELLED_BY_MERCHANT"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1000"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"preAuth"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-032"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"26d3Cp3rJmbMHnuNJmks2N"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5efbe2fb96c08357bb2b9242"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Error Responses </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Status</th> <th style="text-align: left">Code</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INVALID_<wbr />PAYMENT_<wbr />REQUEST_<wbr />TYPE</td> <td style="text-align: left">The Payment Request is not related to a Pre Auth.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PRE_<wbr />AUTH_<wbr />RELEASED</td> <td style="text-align: left"><code class="language-plaintext highlighter-rouge">preAuthExpiresAt</code> has passed.</td> </tr> </tbody> </table></div> <p><a name="confirm"></a></p> <h3 id="make-a-confirmation-against-a-pre-auth-payment-request"> <a href="#make-a-confirmation-against-a-pre-auth-payment-request" aria-labelledby="make-a-confirmation-against-a-pre-auth-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Make a confirmation against a Pre Auth Payment Request </h3> <p>An <code class="language-plaintext highlighter-rouge">idempotencyKey</code> is a identifier from your system used for guaranteeing at least once delivery of your request. If our endpoint does not respond you must retry until you get back a 200 or 403. If we recive 2 requests with the same <code class="language-plaintext highlighter-rouge">idempotencyKey</code> we won’t process the second and return the first response.</p> <p> POST <code>/<wbr />api/<wbr />payment-requests/<wbr />{paymentRequestId}/<wbr />confirm</code> <h4> Confirm Pre Auth Payment Request </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/MhocUmpxxmgdHjr7DgKoKw/confirm <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Content-Type: application/json"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="s1">'{
    "value": {
      "amount": "6190",
      "currency": "NZD"
    },
    "idempotencyKey": "e8df06e2-13a5-48b4-b670-3fd6d815fe0a",
    "invoiceRef": "2022-08-03T16:56:50-06:00",
    "lineItems": [
      {
        "name": "Coffee Grounds",
        "sku": "GH1234",
        "qty": "1",
        "price": "4195",
        "tax": "15.00"
      },
      {
        "name": "Centrapay Cafe Mug",
        "sku": "SB456",
        "qty": "25",
        "price": "1995",
        "tax": "15.00",
        "discount": "199",
        "restricted": true,
        "productId": "19412345123459",
        "classification": {
          "type": "GS1",
          "code": "10001874",
          "name": "CROCKERY",
          "props": {
            "20001479": "30008960"
          }
        }
      }
    ]
  }'</span></code></pre></div> </p> <h4> Example response payload when a Pre Auth is confirmed </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"preAuth"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"confirmation"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"idempotencyKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"e8df06e2-13a5-48b4-b670-3fd6d815fe0a"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"updatedAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-08T04:04:27.426Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"lineItems"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Coffee Grounds"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GH1234"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4195"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Cafe Mug"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"sku"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SB456"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"qty"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"price"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1995"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"tax"</span><span class="p">:</span><span class="w"> </span><span class="s2">"15.00"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"discount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"199"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"invoiceRef"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-08-03T16:56:50-06:00"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdByAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jaim1Cu1Q55uooxSens6yk"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdByAccountName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob's Burgers Intergration"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Error Responses </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Status</th> <th style="text-align: left">Code</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INVALID_<wbr />PAYMENT_<wbr />REQUEST_<wbr />TYPE</td> <td style="text-align: left">The Payment Request is not related to a Pre Auth.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PRE_<wbr />AUTH_<wbr />RELEASED</td> <td style="text-align: left">The Payment Request has been released or Pre Auth has expired. Remaining funds have been returned to the Patron.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PRE_<wbr />AUTH_<wbr />PENDING</td> <td style="text-align: left">The Payment Request has not been authorized.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">REQUEST_<wbr />CANCELLED</td> <td style="text-align: left">The Payment Request has been cancelled.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">INVALID_<wbr />AMOUNT</td> <td style="text-align: left">The confirmation is greater then the remaining funds on the authroization.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">IDEMPOTENT_<wbr />OPERATION_<wbr />FAILED</td> <td style="text-align: left">There has already been a confirmation against the Payment Request with the same idempotencyKey but different content.</td> </tr> </tbody> </table></div> <p><a name="list-activities-for-merchant"></a></p> <h3 id="list-payment-activities-for-a-merchant"> <a href="#list-payment-activities-for-a-merchant" aria-labelledby="list-payment-activities-for-a-merchant" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> List Payment Activities for a Merchant </h3> <p>List payment activities for a merchant. Results are <a href="/api/pagination">paginated</a> and ordered by descending activity created date.</p> <p> GET <code>/<wbr />api/<wbr />payment-activities</code> <h4> </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-G</span> https://service.centrapay.com/api/payment-activities <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span> <span class="se">\</span>
  <span class="nt">-d</span> <span class="nv">merchantId</span><span class="o">=</span>5ee0c486308f590260d9a07f <span class="se">\</span>
  <span class="nt">-d</span> <span class="nv">pageKey</span><span class="o">=</span>PaymentRequest#E9eXsErwA444qFDoZt5iLA|Activity#000000000000001|614161c4c4d3020073bd4ce8|2021-09-15T03:00:21.156Z</code></pre></div> </p> <h4> Required Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>merchantId</td> <td>String</td> <td>The id of the <a href="/api/merchants">Merchant</a> the Payment Request is on behalf of.</td> </tr> </tbody> </table></div> <h4> Optional Fields </h4> <div class="table-wrapper"><table> <thead> <tr> <th>Field</th> <th>Type</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td>pageKey</td> <td>String</td> <td>Used to retrieve the next page of items.</td> </tr> </tbody> </table></div> <h4> Example response payload </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"nextPageKey"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PaymentRequest#E9eXsErwA444qFDoZt5iLA|Activity#000000000000001|614161c4c4d3020073bd4ce8|2021-09-15T03:00:21.156Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refund"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"600"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-032"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-12T01:17:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-027"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-12T01:16:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:da75ad90-9a5b-4df0-8374-f48b3a8fbfcc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"request"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-015"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-12T01:15:46.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <p><a name="list-activities"></a></p> <h3 id="list-payment-activities-for-a-payment-request"> <a href="#list-payment-activities-for-a-payment-request" aria-labelledby="list-payment-activities-for-a-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> List Payment Activities for a Payment Request </h3> <p>List payment activities for a payment request. Results are ordered by descending activity created date.</p> <p> GET <code>/<wbr />api/<wbr />payment-requests/<wbr />{paymentRequestId}/<wbr />activities</code> <h4> </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl https://service.centrapay.com/api/payment-requests/MhocUmpxxmgdHjr7DgKoKw/activities <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"Authorization: </span><span class="nv">$jwt</span><span class="s2">"</span></code></pre></div> </p> <h4> Example response payload </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"items"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"refund"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"600"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-032"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-12T01:17:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"payment"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"assetType"</span><span class="p">:</span><span class="w"> </span><span class="s2">"centrapay.nzd.main"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-027"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-12T01:16:00.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:da75ad90-9a5b-4df0-8374-f48b3a8fbfcc"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"request"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="s2">"6190"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"shortCode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"CP-C7F-ZS5-015"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2021-06-12T01:15:46.000Z"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <p><a name="accept-payment-condition"></a></p> <h3 id="accept-payment-condition-for-a-payment-request"> <a href="#accept-payment-condition-for-a-payment-request" aria-labelledby="accept-payment-condition-for-a-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Accept Payment Condition for a Payment Request </h3> <p>Accept a <a href="#payment-condition">Payment Condition</a> listed in <code class="language-plaintext highlighter-rouge">merchantConditions</code> with status <code class="language-plaintext highlighter-rouge">awaiting-merchant</code>. Returns a <a href="#payment-activity">Payment Activity</a>.</p> <p> POST <code>/<wbr />api/<wbr />payment-requests/<wbr />{paymentRequestId}/<wbr />conditions/<wbr />{conditionId}/<wbr />accept</code> <h4> </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/MhocUmpxxmgdHjr7DgKoKw/conditions/1/accept <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span></code></pre></div> </p> <h4> Example response payload </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"accept-condition"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"conditionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-05-12T01:17:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Error Responses </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Status</th> <th style="text-align: left">Code</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PATRON_<wbr />NOT_<wbr />AUTHORIZED</td> <td style="text-align: left">The Payment Condition is <code class="language-plaintext highlighter-rouge">awaiting-merchant</code>, therefore the patron is not authorized to accept the condition.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">MERCHANT_<wbr />NOT_<wbr />AUTHORIZED</td> <td style="text-align: left">The Payment Condition is <code class="language-plaintext highlighter-rouge">awaiting-patron</code>, therefore the merchant is not authorized to accept the condition.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">CONDITION_<wbr />ALREADY_<wbr />SET</td> <td style="text-align: left">The Payment Condition has already been accepted or declined.</td> </tr> </tbody> </table></div> <p><a name="decline-payment-condition"></a></p> <h3 id="decline-payment-condition-for-a-payment-request"> <a href="#decline-payment-condition-for-a-payment-request" aria-labelledby="decline-payment-condition-for-a-payment-request" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Decline Payment Condition for a Payment Request </h3> <p>Decline a <a href="#payment-condition">Payment Condition</a> listed in <code class="language-plaintext highlighter-rouge">merchantConditions</code> with status <code class="language-plaintext highlighter-rouge">awaiting-merchant</code>. Returns a <a href="#payment-activity">Payment Activity</a>.</p> <p> POST <code>/<wbr />api/<wbr />payment-requests/<wbr />{paymentRequestId}/<wbr />conditions/<wbr />{conditionId}/<wbr />decline</code> <h4> </h4> <div class="highlighter-rouge"><pre class="highlight"><code>curl <span class="nt">-X</span> POST https://service.centrapay.com/api/payment-requests/MhocUmpxxmgdHjr7DgKoKw/conditions/1/decline <span class="se">\</span>
  <span class="nt">-H</span> <span class="s2">"X-Api-Key: </span><span class="nv">$api_key</span><span class="s2">"</span></code></pre></div> </p> <h4> Example response payload </h4> <p> <div class="highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"decline-condition"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"value"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"currency"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NZD"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"paymentRequestId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MhocUmpxxmgdHjr7DgKoKw"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"conditionId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdAt"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2022-05-12T01:17:00.000Z"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"createdBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"paymentRequestCreatedBy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"crn::user:0af834c8-1110-11ec-9072-3e22fb52e878"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"activityNumber"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantAccountId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"C4QnjXvj8At6SMsEN4LRi9"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee0c486308f590260d9a07f"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantConfigId"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5ee168e8597be5002af7b454"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"merchantName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Centrapay Café"</span><span class="w">
</span><span class="p">}</span></code></pre></div> </p> <h4> Error Responses </h4> <div class="table-wrapper"><table> <thead> <tr> <th style="text-align: left">Status</th> <th style="text-align: left">Code</th> <th style="text-align: left">Description</th> </tr> </thead> <tbody> <tr> <td style="text-align: left">403</td> <td style="text-align: left">PATRON_<wbr />NOT_<wbr />AUTHORIZED</td> <td style="text-align: left">The Payment Condition is <code class="language-plaintext highlighter-rouge">awaiting-merchant</code>, therefore the patron is not authorized to decline the condition.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">MERCHANT_<wbr />NOT_<wbr />AUTHORIZED</td> <td style="text-align: left">The Payment Condition is <code class="language-plaintext highlighter-rouge">awaiting-patron</code>, therefore the merchant is not authorized to decline the condition.</td> </tr> <tr> <td style="text-align: left">403</td> <td style="text-align: left">CONDITION_<wbr />ALREADY_<wbr />SET</td> <td style="text-align: left">The Payment Condition has already been accepted or declined.</td> </tr> </tbody> </table></div> <hr> <footer> <p><a href="#top" id="back-to-top">Back to top</a></p> <p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2021 Centrapay</p> </footer> </div> </div> <a href="#" id="search-button" class="search-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-search"></use></svg> </a> <div class="search-overlay"></div> </div> </body> </html>
