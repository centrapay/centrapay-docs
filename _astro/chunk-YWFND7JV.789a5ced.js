import{_ as o,j as T,l as m,d as N,A,B as it,C as X,D as lt,i as Y}from"./mermaid.core.93385ba6.js";function K(c,t){t&&c.attr("style",t)}o(K,"applyStyle");function q(c){const t=T(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),l=t.append("xhtml:div"),a=c.label,s=c.isNode?"nodeLabel":"edgeLabel",r=l.append("span");return r.html(a),K(r,c.labelStyle),r.attr("class",s),K(l,c.labelStyle),l.style("display","inline-block"),l.style("white-space","nowrap"),l.attr("xmlns","http://www.w3.org/1999/xhtml"),t.node()}o(q,"addHtmlLabel");var ct=o((c,t,l,a)=>{let s=c||"";if(typeof s=="object"&&(s=s[0]),A(N().flowchart.htmlLabels)){s=s.replace(/\\n|\n/g,"<br />"),m.debug("vertexText"+s);const r={isNode:a,label:it(X(s)),labelStyle:t.replace("fill:","color:")};return q(r)}else{const r=document.createElementNS("http://www.w3.org/2000/svg","text");r.setAttribute("style",t.replace("color:","fill:"));let e=[];typeof s=="string"?e=s.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(s)?e=s:e=[];for(const i of e){const n=document.createElementNS("http://www.w3.org/2000/svg","tspan");n.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),n.setAttribute("dy","1em"),n.setAttribute("x","0"),l?n.setAttribute("class","title-row"):n.setAttribute("class","row"),n.textContent=i.trim(),r.appendChild(n)}return r}},"createLabel"),R=ct,S=o(async(c,t,l,a)=>{const s=N();let r;const e=t.useHtmlLabels||A(s.flowchart.htmlLabels);l?r=l:r="node default";const i=c.insert("g").attr("class",r).attr("id",t.domId||t.id),n=i.insert("g").attr("class","label").attr("style",t.labelStyle);let y;t.labelText===void 0?y="":y=typeof t.labelText=="string"?t.labelText:t.labelText[0];const h=n.node();let x;t.labelType==="markdown"?x=lt(n,Y(X(y),s),{useHtmlLabels:e,width:t.width||s.flowchart.wrappingWidth,classes:"markdown-node-label"},s):x=h.appendChild(R(Y(X(y),s),t.labelStyle,!1,a));let f=x.getBBox();const g=t.padding/2;if(A(s.flowchart.htmlLabels)){const d=x.children[0],b=T(x),p=d.getElementsByTagName("img");if(p){const C=y.replace(/<img[^>]*>/g,"").trim()==="";await Promise.all([...p].map(v=>new Promise(E=>{function _(){if(v.style.display="flex",v.style.flexDirection="column",C){const j=s.fontSize?s.fontSize:window.getComputedStyle(document.body).fontSize,O=5,W=parseInt(j,10)*O+"px";v.style.minWidth=W,v.style.maxWidth=W}else v.style.width="100%";E(v)}o(_,"setupImage"),setTimeout(()=>{v.complete&&_()}),v.addEventListener("error",_),v.addEventListener("load",_)})))}f=d.getBoundingClientRect(),b.attr("width",f.width),b.attr("height",f.height)}return e?n.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"):n.attr("transform","translate(0, "+-f.height/2+")"),t.centerLabel&&n.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),n.insert("rect",":first-child"),{shapeSvg:i,bbox:f,halfPadding:g,label:n}},"labelHelper"),w=o((c,t)=>{const l=t.node().getBBox();c.width=l.width,c.height=l.height},"updateNodeBounds");function D(c,t,l,a){return c.insert("polygon",":first-child").attr("points",a.map(function(s){return s.x+","+s.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-t/2+","+l/2+")")}o(D,"insertPolygonShape");var nt=o(c=>{const t=new Set;for(const l of c)switch(l){case"x":t.add("right"),t.add("left");break;case"y":t.add("up"),t.add("down");break;default:t.add(l);break}return t},"expandAndDeduplicateDirections"),ht=o((c,t,l)=>{const a=nt(c),s=2,r=t.height+2*l.padding,e=r/s,i=t.width+2*e+l.padding,n=l.padding/2;return a.has("right")&&a.has("left")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:e,y:0},{x:i/2,y:2*n},{x:i-e,y:0},{x:i,y:0},{x:i,y:-r/3},{x:i+2*n,y:-r/2},{x:i,y:-2*r/3},{x:i,y:-r},{x:i-e,y:-r},{x:i/2,y:-r-2*n},{x:e,y:-r},{x:0,y:-r},{x:0,y:-2*r/3},{x:-2*n,y:-r/2},{x:0,y:-r/3}]:a.has("right")&&a.has("left")&&a.has("up")?[{x:e,y:0},{x:i-e,y:0},{x:i,y:-r/2},{x:i-e,y:-r},{x:e,y:-r},{x:0,y:-r/2}]:a.has("right")&&a.has("left")&&a.has("down")?[{x:0,y:0},{x:e,y:-r},{x:i-e,y:-r},{x:i,y:0}]:a.has("right")&&a.has("up")&&a.has("down")?[{x:0,y:0},{x:i,y:-e},{x:i,y:-r+e},{x:0,y:-r}]:a.has("left")&&a.has("up")&&a.has("down")?[{x:i,y:0},{x:0,y:-e},{x:0,y:-r+e},{x:i,y:-r}]:a.has("right")&&a.has("left")?[{x:e,y:0},{x:e,y:-n},{x:i-e,y:-n},{x:i-e,y:0},{x:i,y:-r/2},{x:i-e,y:-r},{x:i-e,y:-r+n},{x:e,y:-r+n},{x:e,y:-r},{x:0,y:-r/2}]:a.has("up")&&a.has("down")?[{x:i/2,y:0},{x:0,y:-n},{x:e,y:-n},{x:e,y:-r+n},{x:0,y:-r+n},{x:i/2,y:-r},{x:i,y:-r+n},{x:i-e,y:-r+n},{x:i-e,y:-n},{x:i,y:-n}]:a.has("right")&&a.has("up")?[{x:0,y:0},{x:i,y:-e},{x:0,y:-r}]:a.has("right")&&a.has("down")?[{x:0,y:0},{x:i,y:0},{x:0,y:-r}]:a.has("left")&&a.has("up")?[{x:i,y:0},{x:0,y:-e},{x:i,y:-r}]:a.has("left")&&a.has("down")?[{x:i,y:0},{x:0,y:0},{x:i,y:-r}]:a.has("right")?[{x:e,y:-n},{x:e,y:-n},{x:i-e,y:-n},{x:i-e,y:0},{x:i,y:-r/2},{x:i-e,y:-r},{x:i-e,y:-r+n},{x:e,y:-r+n},{x:e,y:-r+n}]:a.has("left")?[{x:e,y:0},{x:e,y:-n},{x:i-e,y:-n},{x:i-e,y:-r+n},{x:e,y:-r+n},{x:e,y:-r},{x:0,y:-r/2}]:a.has("up")?[{x:e,y:-n},{x:e,y:-r+n},{x:0,y:-r+n},{x:i/2,y:-r},{x:i,y:-r+n},{x:i-e,y:-r+n},{x:i-e,y:-n}]:a.has("down")?[{x:i/2,y:0},{x:0,y:-n},{x:e,y:-n},{x:e,y:-r+n},{x:i-e,y:-r+n},{x:i-e,y:-n},{x:i,y:-n}]:[{x:0,y:0}]},"getArrowPoints");function Z(c,t){return c.intersect(t)}o(Z,"intersectNode");var ot=Z;function tt(c,t,l,a){var s=c.x,r=c.y,e=s-a.x,i=r-a.y,n=Math.sqrt(t*t*i*i+l*l*e*e),y=Math.abs(t*l*e/n);a.x<s&&(y=-y);var h=Math.abs(t*l*i/n);return a.y<r&&(h=-h),{x:s+y,y:r+h}}o(tt,"intersectEllipse");var rt=tt;function et(c,t,l){return rt(c,t,t,l)}o(et,"intersectCircle");var yt=et;function at(c,t,l,a){var s,r,e,i,n,y,h,x,f,g,d,b,p,C,v;if(s=t.y-c.y,e=c.x-t.x,n=t.x*c.y-c.x*t.y,f=s*l.x+e*l.y+n,g=s*a.x+e*a.y+n,!(f!==0&&g!==0&&U(f,g))&&(r=a.y-l.y,i=l.x-a.x,y=a.x*l.y-l.x*a.y,h=r*c.x+i*c.y+y,x=r*t.x+i*t.y+y,!(h!==0&&x!==0&&U(h,x))&&(d=s*i-r*e,d!==0)))return b=Math.abs(d/2),p=e*y-i*n,C=p<0?(p-b)/d:(p+b)/d,p=r*n-s*y,v=p<0?(p-b)/d:(p+b)/d,{x:C,y:v}}o(at,"intersectLine");function U(c,t){return c*t>0}o(U,"sameSign");var xt=at,gt=st;function st(c,t,l){var a=c.x,s=c.y,r=[],e=Number.POSITIVE_INFINITY,i=Number.POSITIVE_INFINITY;typeof t.forEach=="function"?t.forEach(function(d){e=Math.min(e,d.x),i=Math.min(i,d.y)}):(e=Math.min(e,t.x),i=Math.min(i,t.y));for(var n=a-c.width/2-e,y=s-c.height/2-i,h=0;h<t.length;h++){var x=t[h],f=t[h<t.length-1?h+1:0],g=xt(c,l,{x:n+x.x,y:y+x.y},{x:n+f.x,y:y+f.y});g&&r.push(g)}return r.length?(r.length>1&&r.sort(function(d,b){var p=d.x-l.x,C=d.y-l.y,v=Math.sqrt(p*p+C*C),E=b.x-l.x,_=b.y-l.y,j=Math.sqrt(E*E+_*_);return v<j?-1:v===j?0:1}),r[0]):c}o(st,"intersectPolygon");var ft=o((c,t)=>{var l=c.x,a=c.y,s=t.x-l,r=t.y-a,e=c.width/2,i=c.height/2,n,y;return Math.abs(r)*e>Math.abs(s)*i?(r<0&&(i=-i),n=r===0?0:i*s/r,y=i):(s<0&&(e=-e),n=e,y=s===0?0:e*r/s),{x:l+n,y:a+y}},"intersectRect"),dt=ft,u={node:ot,circle:yt,ellipse:rt,polygon:gt,rect:dt},pt=o(async(c,t)=>{t.useHtmlLabels||N().flowchart.htmlLabels||(t.centerLabel=!0);const{shapeSvg:a,bbox:s,halfPadding:r}=await S(c,t,"node "+t.classes,!0);m.info("Classes = ",t.classes);const e=a.insert("rect",":first-child");return e.attr("rx",t.rx).attr("ry",t.ry).attr("x",-s.width/2-r).attr("y",-s.height/2-r).attr("width",s.width+t.padding).attr("height",s.height+t.padding),w(t,e),t.intersect=function(i){return u.rect(t,i)},a},"note"),ut=pt,J=o(c=>c?" "+c:"","formatClass"),I=o((c,t)=>`${t||"node default"}${J(c.classes)} ${J(c.class)}`,"getClassesFromNode"),V=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=a.width+t.padding,r=a.height+t.padding,e=s+r,i=[{x:e/2,y:0},{x:e,y:-e/2},{x:e/2,y:-e},{x:0,y:-e/2}];m.info("Question main (Circle)");const n=D(l,e,e,i);return n.attr("style",t.style),w(t,n),t.intersect=function(y){return m.warn("Intersect called"),u.polygon(t,i,y)},l},"question"),wt=o((c,t)=>{const l=c.insert("g").attr("class","node default").attr("id",t.domId||t.id),a=28,s=[{x:0,y:a/2},{x:a/2,y:0},{x:0,y:-a/2},{x:-a/2,y:0}];return l.insert("polygon",":first-child").attr("points",s.map(function(e){return e.x+","+e.y}).join(" ")).attr("class","state-start").attr("r",7).attr("width",28).attr("height",28),t.width=28,t.height=28,t.intersect=function(e){return u.circle(t,14,e)},l},"choice"),bt=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=4,r=a.height+t.padding,e=r/s,i=a.width+2*e+t.padding,n=[{x:e,y:0},{x:i-e,y:0},{x:i,y:-r/2},{x:i-e,y:-r},{x:e,y:-r},{x:0,y:-r/2}],y=D(l,i,r,n);return y.attr("style",t.style),w(t,y),t.intersect=function(h){return u.polygon(t,n,h)},l},"hexagon"),vt=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,void 0,!0),s=2,r=a.height+2*t.padding,e=r/s,i=a.width+2*e+t.padding,n=ht(t.directions,a,t),y=D(l,i,r,n);return y.attr("style",t.style),w(t,y),t.intersect=function(h){return u.polygon(t,n,h)},l},"block_arrow"),mt=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=a.width+t.padding,r=a.height+t.padding,e=[{x:-r/2,y:0},{x:s,y:0},{x:s,y:-r},{x:-r/2,y:-r},{x:0,y:-r/2}];return D(l,s,r,e).attr("style",t.style),t.width=s+r,t.height=r,t.intersect=function(n){return u.polygon(t,e,n)},l},"rect_left_inv_arrow"),St=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t),!0),s=a.width+t.padding,r=a.height+t.padding,e=[{x:-2*r/6,y:0},{x:s-r/6,y:0},{x:s+2*r/6,y:-r},{x:r/6,y:-r}],i=D(l,s,r,e);return i.attr("style",t.style),w(t,i),t.intersect=function(n){return u.polygon(t,e,n)},l},"lean_right"),Bt=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=a.width+t.padding,r=a.height+t.padding,e=[{x:2*r/6,y:0},{x:s+r/6,y:0},{x:s-2*r/6,y:-r},{x:-r/6,y:-r}],i=D(l,s,r,e);return i.attr("style",t.style),w(t,i),t.intersect=function(n){return u.polygon(t,e,n)},l},"lean_left"),Lt=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=a.width+t.padding,r=a.height+t.padding,e=[{x:-2*r/6,y:0},{x:s+2*r/6,y:0},{x:s-r/6,y:-r},{x:r/6,y:-r}],i=D(l,s,r,e);return i.attr("style",t.style),w(t,i),t.intersect=function(n){return u.polygon(t,e,n)},l},"trapezoid"),_t=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=a.width+t.padding,r=a.height+t.padding,e=[{x:r/6,y:0},{x:s-r/6,y:0},{x:s+2*r/6,y:-r},{x:-2*r/6,y:-r}],i=D(l,s,r,e);return i.attr("style",t.style),w(t,i),t.intersect=function(n){return u.polygon(t,e,n)},l},"inv_trapezoid"),Ct=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=a.width+t.padding,r=a.height+t.padding,e=[{x:0,y:0},{x:s+r/2,y:0},{x:s,y:-r/2},{x:s+r/2,y:-r},{x:0,y:-r}],i=D(l,s,r,e);return i.attr("style",t.style),w(t,i),t.intersect=function(n){return u.polygon(t,e,n)},l},"rect_right_inv_arrow"),Tt=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=a.width+t.padding,r=s/2,e=r/(2.5+s/50),i=a.height+e+t.padding,n="M 0,"+e+" a "+r+","+e+" 0,0,0 "+s+" 0 a "+r+","+e+" 0,0,0 "+-s+" 0 l 0,"+i+" a "+r+","+e+" 0,0,0 "+s+" 0 l 0,"+-i,y=l.attr("label-offset-y",e).insert("path",":first-child").attr("style",t.style).attr("d",n).attr("transform","translate("+-s/2+","+-(i/2+e)+")");return w(t,y),t.intersect=function(h){const x=u.rect(t,h),f=x.x-t.x;if(r!=0&&(Math.abs(f)<t.width/2||Math.abs(f)==t.width/2&&Math.abs(x.y-t.y)>t.height/2-e)){let g=e*e*(1-f*f/(r*r));g!=0&&(g=Math.sqrt(g)),g=e-g,h.y-t.y>0&&(g=-g),x.y+=g}return x},l},"cylinder"),kt=o(async(c,t)=>{const{shapeSvg:l,bbox:a,halfPadding:s}=await S(c,t,"node "+t.classes+" "+t.class,!0),r=l.insert("rect",":first-child"),e=t.positioned?t.width:a.width+t.padding,i=t.positioned?t.height:a.height+t.padding,n=t.positioned?-e/2:-a.width/2-s,y=t.positioned?-i/2:-a.height/2-s;if(r.attr("class","basic label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",n).attr("y",y).attr("width",e).attr("height",i),t.props){const h=new Set(Object.keys(t.props));t.props.borders&&($(r,t.props.borders,e,i),h.delete("borders")),h.forEach(x=>{m.warn(`Unknown node property ${x}`)})}return w(t,r),t.intersect=function(h){return u.rect(t,h)},l},"rect"),Nt=o(async(c,t)=>{const{shapeSvg:l,bbox:a,halfPadding:s}=await S(c,t,"node "+t.classes,!0),r=l.insert("rect",":first-child"),e=t.positioned?t.width:a.width+t.padding,i=t.positioned?t.height:a.height+t.padding,n=t.positioned?-e/2:-a.width/2-s,y=t.positioned?-i/2:-a.height/2-s;if(r.attr("class","basic cluster composite label-container").attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("x",n).attr("y",y).attr("width",e).attr("height",i),t.props){const h=new Set(Object.keys(t.props));t.props.borders&&($(r,t.props.borders,e,i),h.delete("borders")),h.forEach(x=>{m.warn(`Unknown node property ${x}`)})}return w(t,r),t.intersect=function(h){return u.rect(t,h)},l},"composite"),It=o(async(c,t)=>{const{shapeSvg:l}=await S(c,t,"label",!0);m.trace("Classes = ",t.class);const a=l.insert("rect",":first-child"),s=0,r=0;if(a.attr("width",s).attr("height",r),l.attr("class","label edgeLabel"),t.props){const e=new Set(Object.keys(t.props));t.props.borders&&($(a,t.props.borders,s,r),e.delete("borders")),e.forEach(i=>{m.warn(`Unknown node property ${i}`)})}return w(t,a),t.intersect=function(e){return u.rect(t,e)},l},"labelRect");function $(c,t,l,a){const s=[],r=o(i=>{s.push(i,0)},"addBorder"),e=o(i=>{s.push(0,i)},"skipBorder");t.includes("t")?(m.debug("add top border"),r(l)):e(l),t.includes("r")?(m.debug("add right border"),r(a)):e(a),t.includes("b")?(m.debug("add bottom border"),r(l)):e(l),t.includes("l")?(m.debug("add left border"),r(a)):e(a),c.attr("stroke-dasharray",s.join(" "))}o($,"applyNodePropertyBorders");var Dt=o((c,t)=>{let l;t.classes?l="node "+t.classes:l="node default";const a=c.insert("g").attr("class",l).attr("id",t.domId||t.id),s=a.insert("rect",":first-child"),r=a.insert("line"),e=a.insert("g").attr("class","label"),i=t.labelText.flat?t.labelText.flat():t.labelText;let n="";typeof i=="object"?n=i[0]:n=i,m.info("Label text abc79",n,i,typeof i=="object");const y=e.node().appendChild(R(n,t.labelStyle,!0,!0));let h={width:0,height:0};if(A(N().flowchart.htmlLabels)){const b=y.children[0],p=T(y);h=b.getBoundingClientRect(),p.attr("width",h.width),p.attr("height",h.height)}m.info("Text 2",i);const x=i.slice(1,i.length);let f=y.getBBox();const g=e.node().appendChild(R(x.join?x.join("<br/>"):x,t.labelStyle,!0,!0));if(A(N().flowchart.htmlLabels)){const b=g.children[0],p=T(g);h=b.getBoundingClientRect(),p.attr("width",h.width),p.attr("height",h.height)}const d=t.padding/2;return T(g).attr("transform","translate( "+(h.width>f.width?0:(f.width-h.width)/2)+", "+(f.height+d+5)+")"),T(y).attr("transform","translate( "+(h.width<f.width?0:-(f.width-h.width)/2)+", 0)"),h=e.node().getBBox(),e.attr("transform","translate("+-h.width/2+", "+(-h.height/2-d+3)+")"),s.attr("class","outer title-state").attr("x",-h.width/2-d).attr("y",-h.height/2-d).attr("width",h.width+t.padding).attr("height",h.height+t.padding),r.attr("class","divider").attr("x1",-h.width/2-d).attr("x2",h.width/2+d).attr("y1",-h.height/2-d+f.height+d).attr("y2",-h.height/2-d+f.height+d),w(t,s),t.intersect=function(b){return u.rect(t,b)},a},"rectWithTitle"),Et=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=a.height+t.padding,r=a.width+s/4+t.padding,e=l.insert("rect",":first-child").attr("style",t.style).attr("rx",s/2).attr("ry",s/2).attr("x",-r/2).attr("y",-s/2).attr("width",r).attr("height",s);return w(t,e),t.intersect=function(i){return u.rect(t,i)},l},"stadium"),Mt=o(async(c,t)=>{const{shapeSvg:l,bbox:a,halfPadding:s}=await S(c,t,I(t,void 0),!0),r=l.insert("circle",":first-child");return r.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",a.width/2+s).attr("width",a.width+t.padding).attr("height",a.height+t.padding),m.info("Circle main"),w(t,r),t.intersect=function(e){return m.info("Circle intersect",t,a.width/2+s,e),u.circle(t,a.width/2+s,e)},l},"circle"),At=o(async(c,t)=>{const{shapeSvg:l,bbox:a,halfPadding:s}=await S(c,t,I(t,void 0),!0),r=5,e=l.insert("g",":first-child"),i=e.insert("circle"),n=e.insert("circle");return e.attr("class",t.class),i.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",a.width/2+s+r).attr("width",a.width+t.padding+r*2).attr("height",a.height+t.padding+r*2),n.attr("style",t.style).attr("rx",t.rx).attr("ry",t.ry).attr("r",a.width/2+s).attr("width",a.width+t.padding).attr("height",a.height+t.padding),m.info("DoubleCircle main"),w(t,i),t.intersect=function(y){return m.info("DoubleCircle intersect",t,a.width/2+s+r,y),u.circle(t,a.width/2+s+r,y)},l},"doublecircle"),jt=o(async(c,t)=>{const{shapeSvg:l,bbox:a}=await S(c,t,I(t,void 0),!0),s=a.width+t.padding,r=a.height+t.padding,e=[{x:0,y:0},{x:s,y:0},{x:s,y:-r},{x:0,y:-r},{x:0,y:0},{x:-8,y:0},{x:s+8,y:0},{x:s+8,y:-r},{x:-8,y:-r},{x:-8,y:0}],i=D(l,s,r,e);return i.attr("style",t.style),w(t,i),t.intersect=function(n){return u.polygon(t,e,n)},l},"subroutine"),Pt=o((c,t)=>{const l=c.insert("g").attr("class","node default").attr("id",t.domId||t.id),a=l.insert("circle",":first-child");return a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),w(t,a),t.intersect=function(s){return u.circle(t,7,s)},l},"start"),G=o((c,t,l)=>{const a=c.insert("g").attr("class","node default").attr("id",t.domId||t.id);let s=70,r=10;l==="LR"&&(s=10,r=70);const e=a.append("rect").attr("x",-1*s/2).attr("y",-1*r/2).attr("width",s).attr("height",r).attr("class","fork-join");return w(t,e),t.height=t.height+t.padding/2,t.width=t.width+t.padding/2,t.intersect=function(i){return u.rect(t,i)},a},"forkJoin"),Rt=o((c,t)=>{const l=c.insert("g").attr("class","node default").attr("id",t.domId||t.id),a=l.insert("circle",":first-child"),s=l.insert("circle",":first-child");return s.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14),a.attr("class","state-end").attr("r",5).attr("width",10).attr("height",10),w(t,s),t.intersect=function(r){return u.circle(t,7,r)},l},"end"),Ht=o((c,t)=>{const l=t.padding/2,a=4,s=8;let r;t.classes?r="node "+t.classes:r="node default";const e=c.insert("g").attr("class",r).attr("id",t.domId||t.id),i=e.insert("rect",":first-child"),n=e.insert("line"),y=e.insert("line");let h=0,x=a;const f=e.insert("g").attr("class","label");let g=0;const d=t.classData.annotations?.[0],b=t.classData.annotations[0]?"«"+t.classData.annotations[0]+"»":"",p=f.node().appendChild(R(b,t.labelStyle,!0,!0));let C=p.getBBox();if(A(N().flowchart.htmlLabels)){const B=p.children[0],L=T(p);C=B.getBoundingClientRect(),L.attr("width",C.width),L.attr("height",C.height)}t.classData.annotations[0]&&(x+=C.height+a,h+=C.width);let v=t.classData.label;t.classData.type!==void 0&&t.classData.type!==""&&(N().flowchart.htmlLabels?v+="&lt;"+t.classData.type+"&gt;":v+="<"+t.classData.type+">");const E=f.node().appendChild(R(v,t.labelStyle,!0,!0));T(E).attr("class","classTitle");let _=E.getBBox();if(A(N().flowchart.htmlLabels)){const B=E.children[0],L=T(E);_=B.getBoundingClientRect(),L.attr("width",_.width),L.attr("height",_.height)}x+=_.height+a,_.width>h&&(h=_.width);const j=[];t.classData.members.forEach(B=>{const L=B.getDisplayDetails();let P=L.displayText;N().flowchart.htmlLabels&&(P=P.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const M=f.node().appendChild(R(P,L.cssStyle?L.cssStyle:t.labelStyle,!0,!0));let k=M.getBBox();if(A(N().flowchart.htmlLabels)){const F=M.children[0],z=T(M);k=F.getBoundingClientRect(),z.attr("width",k.width),z.attr("height",k.height)}k.width>h&&(h=k.width),x+=k.height+a,j.push(M)}),x+=s;const O=[];if(t.classData.methods.forEach(B=>{const L=B.getDisplayDetails();let P=L.displayText;N().flowchart.htmlLabels&&(P=P.replace(/</g,"&lt;").replace(/>/g,"&gt;"));const M=f.node().appendChild(R(P,L.cssStyle?L.cssStyle:t.labelStyle,!0,!0));let k=M.getBBox();if(A(N().flowchart.htmlLabels)){const F=M.children[0],z=T(M);k=F.getBoundingClientRect(),z.attr("width",k.width),z.attr("height",k.height)}k.width>h&&(h=k.width),x+=k.height+a,O.push(M)}),x+=s,d){let B=(h-C.width)/2;T(p).attr("transform","translate( "+(-1*h/2+B)+", "+-1*x/2+")"),g=C.height+a}let W=(h-_.width)/2;return T(E).attr("transform","translate( "+(-1*h/2+W)+", "+(-1*x/2+g)+")"),g+=_.height+a,n.attr("class","divider").attr("x1",-h/2-l).attr("x2",h/2+l).attr("y1",-x/2-l+s+g).attr("y2",-x/2-l+s+g),g+=s,j.forEach(B=>{T(B).attr("transform","translate( "+-h/2+", "+(-1*x/2+g+s/2)+")");const L=B?.getBBox();g+=(L?.height??0)+a}),g+=s,y.attr("class","divider").attr("x1",-h/2-l).attr("x2",h/2+l).attr("y1",-x/2-l+s+g).attr("y2",-x/2-l+s+g),g+=s,O.forEach(B=>{T(B).attr("transform","translate( "+-h/2+", "+(-1*x/2+g)+")");const L=B?.getBBox();g+=(L?.height??0)+a}),i.attr("style",t.style).attr("class","outer title-state").attr("x",-h/2-l).attr("y",-(x/2)-l).attr("width",h+t.padding).attr("height",x+t.padding),w(t,i),t.intersect=function(B){return u.rect(t,B)},e},"class_box"),Q={rhombus:V,composite:Nt,question:V,rect:kt,labelRect:It,rectWithTitle:Dt,choice:wt,circle:Mt,doublecircle:At,stadium:Et,hexagon:bt,block_arrow:vt,rect_left_inv_arrow:mt,lean_right:St,lean_left:Bt,trapezoid:Lt,inv_trapezoid:_t,rect_right_inv_arrow:Ct,cylinder:Tt,start:Pt,end:Rt,note:ut,subroutine:jt,fork:G,join:G,class_box:Ht},H={},Ot=o(async(c,t,l)=>{let a,s;if(t.link){let r;N().securityLevel==="sandbox"?r="_top":t.linkTarget&&(r=t.linkTarget||"_blank"),a=c.insert("svg:a").attr("xlink:href",t.link).attr("target",r),s=await Q[t.shape](a,t,l)}else s=await Q[t.shape](c,t,l),a=s;return t.tooltip&&s.attr("title",t.tooltip),t.class&&s.attr("class","node default "+t.class),H[t.id]=a,t.haveCallback&&H[t.id].attr("class",H[t.id].attr("class")+" clickable"),a},"insertNode"),Wt=o((c,t)=>{H[t.id]=c},"setNodeElem"),$t=o(()=>{H={}},"clear"),Ft=o(c=>{const t=H[c.id];m.trace("Transforming node",c.diff,c,"translate("+(c.x-c.width/2-5)+", "+c.width/2+")");const l=8,a=c.diff||0;return c.clusterNode?t.attr("transform","translate("+(c.x+a-c.width/2)+", "+(c.y-c.height/2-l)+")"):t.attr("transform","translate("+c.x+", "+c.y+")"),a},"positionNode");export{R as a,dt as b,$t as c,Ot as i,Ft as p,Wt as s,w as u};
